{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template   report_adeptus_insights/global_auth_header
    @package    report_adeptus_insights
    @copyright  2026 Adeptus 360 <info@adeptus360.com>
    @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later

    Global authentication header partial template displaying user authentication status
    with login/logout functionality.

    Example context (json):
    {
        "auth_status": {"user_authorized": true, "user_name": "Admin"}
    }
}}

<div class="adeptus-global-auth-header">
    <div class="adeptus-auth-status-container">
        {{#auth_status}}
            {{#user_authorized}}
                <div class="adeptus-auth-status adeptus-auth-success">
                    <i class="fa fa-check-circle"></i>
                    <span class="adeptus-status-text">{{#str}}authenticated, report_adeptus_insights{{/str}}</span>
                    <span class="adeptus-user-info">{{user_name}}</span>
                    <button class="btn btn-sm btn-outline-secondary adeptus-btn-logout" onclick="if(typeof GlobalAuth !== 'undefined') GlobalAuth.logout();">
                        <i class="fa fa-sign-out"></i> {{#str}}logout, report_adeptus_insights{{/str}}
                    </button>
                </div>
            {{/user_authorized}}
            {{^user_authorized}}
                <div class="adeptus-auth-status adeptus-auth-warning">
                    <i class="fa fa-exclamation-triangle"></i>
                    <span class="adeptus-status-text">{{#str}}authentication_required, report_adeptus_insights{{/str}}</span>
                    <button class="btn btn-sm btn-primary adeptus-btn-login" onclick="if(typeof GlobalAuth !== 'undefined') GlobalAuth.showModal();">
                        <i class="fa fa-sign-in"></i> {{#str}}login, report_adeptus_insights{{/str}}
                    </button>
                </div>
            {{/user_authorized}}
        {{/auth_status}}
        {{^auth_status}}
            <div class="adeptus-auth-status adeptus-auth-unknown" style="display: none;">
                <i class="fa fa-question-circle"></i>
                <span class="adeptus-status-text">{{#str}}checking_authentication, report_adeptus_insights{{/str}}</span>
            </div>
        {{/auth_status}}
    </div>
</div>
