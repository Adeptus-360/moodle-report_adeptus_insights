{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template   report_adeptus_insights/index

    Main dashboard template for Adeptus Insights plugin displaying feature cards,
    subscription status, and navigation to key plugin areas.

    CSS is loaded from: styles/index.css
    JS is loaded from: amd/src/index_dashboard.js (via PHP)

    @package    report_adeptus_insights
    @copyright  2026 Adeptus 360 <info@adeptus360.com>
    @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
}}

<div class="adeptus-insights-dashboard">
    <div class="container-fluid">
        <!-- Welcome section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body text-center">
                        <h1 class="display-4 mb-3">{{#str}}welcome_to_adeptus, report_adeptus_insights{{/str}}</h1>
                        <p class="lead">{{#str}}welcome_description, report_adeptus_insights{{/str}}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feature Cards -->
        <div class="row">
            <!-- Generated Reports Card -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 adeptus-report-card" onclick="location.href='{{config.wwwroot}}/report/adeptus_insights/generated_reports.php';">
                    <div class="card-body text-center">
                        <div class="adeptus-lottie-container mb-3">
                            <div data-lottie-path="report/adeptus_insights/amd/lottie/generated_reports.json"></div>
                        </div>
                        <h5 class="card-title">{{#str}}generated_reports, report_adeptus_insights{{/str}}</h5>
                        <p class="card-text">{{#str}}generated_reports_desc, report_adeptus_insights{{/str}}</p>
                        <a href="{{config.wwwroot}}/report/adeptus_insights/generated_reports.php" class="btn btn-generated-reports">{{#str}}view_reports, report_adeptus_insights{{/str}}</a>
                    </div>
                </div>
            </div>

            <!-- Report Wizard Card -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 adeptus-report-card" onclick="location.href='{{config.wwwroot}}/report/adeptus_insights/wizard.php';">
                    <div class="card-body text-center">
                        <div class="adeptus-lottie-container mb-3">
                            <div data-lottie-path="report/adeptus_insights/amd/lottie/report_wizard.json"></div>
                        </div>
                        <h5 class="card-title">{{#str}}report_wizard, report_adeptus_insights{{/str}}</h5>
                        <p class="card-text">{{#str}}report_wizard_desc, report_adeptus_insights{{/str}}</p>
                        <a href="{{config.wwwroot}}/report/adeptus_insights/wizard.php" class="btn btn-report-wizard">{{#str}}get_started, report_adeptus_insights{{/str}}</a>
                    </div>
                </div>
            </div>

            <!-- AI Assistant Card -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 adeptus-report-card" onclick="location.href='{{config.wwwroot}}/report/adeptus_insights/assistant.php';">
                <div class="card-body text-center">
                        <div class="adeptus-lottie-container mb-3">
                            <div data-lottie-path="report/adeptus_insights/amd/lottie/ai_assistant.json"></div>
                        </div>
                        <h5 class="card-title">{{#str}}ai_driven_assistant, report_adeptus_insights{{/str}}</h5>
                        <p class="card-text">{{#str}}ai_driven_assistant_desc, report_adeptus_insights{{/str}}</p>
                        <a href="{{config.wwwroot}}/report/adeptus_insights/assistant.php" class="btn btn-start-chat">{{#str}}start_chat, report_adeptus_insights{{/str}}</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Current subscription status -->
        {{#subscription}}
        <div class="row mt-4">
            <div class="col-12">
                <div class="card adeptus-analytics-card">
                    <div class="card-header adeptus-analytics-header d-flex align-items-center justify-content-between">
                        <h4 class="m-0">{{#str}}current_subscription, report_adeptus_insights{{/str}}</h4>
                        <span class="adeptus-status-pill" aria-live="polite">
                            <i class="icon fa fa-check-circle"></i>
                            <span class="adeptus-status-text text-capitalize">{{status}}</span>
                        </span>
                    </div>

                    <div class="card-body">
                        <div class="adeptus-stats-grid">
                            <!-- Plan -->
                            <div class="adeptus-stat-card" role="group" aria-label="Plan">
                                <div class="adeptus-stat-icon adeptus-icon-plan"><i class="icon fa fa-cubes" aria-hidden="true"></i></div>
                                <div class="adeptus-stat-label">{{#str}}plan, report_adeptus_insights{{/str}}</div>
                                <div class="adeptus-stat-value adeptus-stat-text no-animate" data-raw="{{plan_name}}">{{plan_name}}</div>
                            </div>

                            <!-- Status -->
                            <div class="adeptus-stat-card" role="group" aria-label="Status">
                                <div class="adeptus-stat-icon adeptus-icon-status"><i class="icon fa fa-bolt" aria-hidden="true"></i></div>
                                <div class="adeptus-stat-label">{{#str}}status, report_adeptus_insights{{/str}}</div>
                                <div class="adeptus-stat-value adeptus-stat-text no-animate text-capitalize" data-raw="{{status}}">{{status}}</div>
                            </div>

                            <!-- AI tokens remaining -->
                            <div class="adeptus-stat-card" role="group" aria-label="AI tokens remaining">
                                <div class="adeptus-stat-icon adeptus-icon-credits"><i class="icon fa fa-code" aria-hidden="true"></i></div>
                                <div class="adeptus-stat-label">{{#str}}ai_tokens_remaining, report_adeptus_insights{{/str}}</div>
                                <div class="adeptus-stat-value" data-raw="{{tokens_remaining_formatted}}">{{tokens_remaining_formatted}}</div>
                            </div>

                            <!-- Exports remaining -->
                            <div class="adeptus-stat-card" role="group" aria-label="Exports remaining">
                                <div class="adeptus-stat-icon adeptus-icon-exports"><i class="icon fa fa-cloud-download" aria-hidden="true"></i></div>
                                <div class="adeptus-stat-label">{{#str}}exports_remaining, report_adeptus_insights{{/str}}</div>
                                <div class="adeptus-stat-value" data-count-to="{{exports_remaining}}">0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{/subscription}}

        <!-- Subscription Management & Support Banners -->
        <div class="row mt-2">
            <!-- Subscription Management Banner -->
            <div class="col-md-6 mb-3 mb-md-0">
                <div class="adeptus-subscription-banner" onclick="location.href='{{config.wwwroot}}/report/adeptus_insights/subscription.php';">
                    <div class="adeptus-subscription-banner-content">
                        <div class="adeptus-subscription-banner-icon">
                            <i class="fa fa-credit-card"></i>
                        </div>
                        <div class="adeptus-subscription-banner-text">
                            <h6 class="mb-0">{{#str}}subscription_management, report_adeptus_insights{{/str}}</h6>
                            <small class="adeptus-text-muted-light">{{#str}}subscription_management_desc, report_adeptus_insights{{/str}}</small>
                        </div>
                        <div class="adeptus-subscription-banner-action">
                            <a href="{{config.wwwroot}}/report/adeptus_insights/subscription.php" class="btn btn-light btn-sm">
                                {{#str}}manage_subscription, report_adeptus_insights{{/str}} <i class="fa fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Support & Updates Banner -->
            <div class="col-md-6">
                <div class="adeptus-support-banner" onclick="location.href='{{config.wwwroot}}/report/adeptus_insights/support.php';">
                    <div class="adeptus-support-banner-content">
                        <div class="adeptus-support-banner-icon">
                            <i class="fa fa-life-ring"></i>
                        </div>
                        <div class="adeptus-support-banner-text">
                            <h6 class="mb-0">{{#str}}support_updates, report_adeptus_insights{{/str}}</h6>
                            <small class="adeptus-text-muted-light">{{#str}}support_updates_desc, report_adeptus_insights{{/str}}</small>
                        </div>
                        <div class="adeptus-support-banner-action">
                            <a href="{{config.wwwroot}}/report/adeptus_insights/support.php" class="btn btn-light btn-sm">
                                {{#str}}view_tickets, report_adeptus_insights{{/str}} <i class="fa fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
