{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template   report_adeptus_insights/registration

    Registration wizard template providing a modern, beautiful, multi-step interface
    for new user registration and onboarding.

    Example context (json):
    {
        "registration_title": "Registration",
        "admin_email": "admin@example.com"
    }

    @package    report_adeptus_insights
    @copyright  2026 Adeptus 360 <info@adeptus360.com>
    @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
}}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>



{{#js}}
require(
    ['report_adeptus_insights/registration'],
    function(Registration) {
        if (Registration && typeof Registration.init === 'function') {
            Registration.init();
        }
    }
);
{{/js}}

<div class="adeptus-wizard-container" id="registration-container">
    <!-- Header Section -->
    <div class="adeptus-wizard-header">
        <div class="adeptus-wizard-header-content">
            <h1 class="adeptus-wizard-title"><i class="fa fa-rocket adeptus-wizard-icon"></i> {{registration_title}}
            </h1>
            <p class="adeptus-wizard-subtitle">{{#str}}registration_setup_subtitle, report_adeptus_insights{{/str}}</p>
        </div>
        <div class="adeptus-wizard-user-info">
            <span class="adeptus-user-welcome">Welcome, {{user_fullname}}</span>
        </div>
    </div>

    <!-- Main Registration Steps -->
    <div class="adeptus-wizard-steps-container">

        <!-- Step 1: Welcome & Overview -->
        <div class="adeptus-wizard-step active" id="step-welcome">
            <div class="adeptus-step-header">
                <h2><span class="adeptus-step-number">1</span> {{#str}}welcome_to_adeptus, report_adeptus_insights{{/str}}</h2>
                <p>{{#str}}lets_get_configured, report_adeptus_insights{{/str}}</p>
            </div>

            <div class="adeptus-welcome-content">
                <div class="adeptus-welcome-grid">
                    <div class="adeptus-welcome-card">
                        <div class="adeptus-welcome-icon">
                            <i class="fa fa-bar-chart"></i>
                        </div>
                        <h3>{{#str}}advanced_analytics, report_adeptus_insights{{/str}}</h3>
                        <p>{{#str}}advanced_analytics_desc, report_adeptus_insights{{/str}}</p>
                    </div>

                    <div class="adeptus-welcome-card">
                        <div class="adeptus-welcome-icon">
                            <i class="fa fa-magic"></i>
                        </div>
                        <h3>{{#str}}smart_reports, report_adeptus_insights{{/str}}</h3>
                        <p>{{#str}}smart_reports_desc, report_adeptus_insights{{/str}}</p>
                    </div>

                    <div class="adeptus-welcome-card">
                        <div class="adeptus-welcome-icon">
                            <i class="fa fa-cloud"></i>
                        </div>
                        <h3>{{#str}}cloud_integration, report_adeptus_insights{{/str}}</h3>
                        <p>{{#str}}cloud_integration_desc, report_adeptus_insights{{/str}}</p>
                    </div>
                </div>

                <div class="adeptus-welcome-actions">
                    <button class="btn-primary btn-next-step" data-step="admin-info">
                        <i class="fa fa-arrow-right"></i> {{#str}}get_started, report_adeptus_insights{{/str}}
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 2: Admin Information -->
        <div class="adeptus-wizard-step" id="step-admin-info">
            <div class="adeptus-step-header">
                <button class="adeptus-btn-back" id="back-to-welcome">
                    <i class="fa fa-arrow-left"></i> {{#str}}back, report_adeptus_insights{{/str}}
                </button>
                <h2><span class="adeptus-step-number">2</span> {{#str}}administrator_information, report_adeptus_insights{{/str}}</h2>
                <p>{{#str}}tell_us_about_yourself, report_adeptus_insights{{/str}}</p>
            </div>

            <div class="adeptus-admin-form-container">
                <div class="adeptus-form-section">
                    <h3>{{#str}}personal_information, report_adeptus_insights{{/str}}</h3>
                    <div class="adeptus-form-grid">
                        <div class="adeptus-form-group">
                            <label for="admin_name" class="adeptus-form-label">{{#str}}full_name, report_adeptus_insights{{/str}} *</label>
                            <input type="text" id="admin_name" name="admin_name" class="form-control" required>
                            <small class="adeptus-form-help">{{#str}}your_full_name_admin, report_adeptus_insights{{/str}}</small>
                        </div>

                        <div class="adeptus-form-group">
                            <label for="admin_email" class="adeptus-form-label">{{#str}}email_address, report_adeptus_insights{{/str}} *</label>
                            <input type="email" id="admin_email" name="admin_email" class="form-control" required>
                            <small class="adeptus-form-help">{{#str}}email_notifications_help, report_adeptus_insights{{/str}}</small>
                        </div>
                    </div>
                </div>

                <div class="adeptus-form-section">
                    <h3>{{#str}}installation_details, report_adeptus_insights{{/str}}</h3>
                    <div class="adeptus-installation-info">
                        <div class="adeptus-info-item">
                            <span class="adeptus-info-label">{{#str}}site_url_label, report_adeptus_insights{{/str}}</span>
                            <span class="adeptus-info-value">{{site_url}}</span>
                        </div>
                        <div class="adeptus-info-item">
                            <span class="adeptus-info-label">{{#str}}site_name_label, report_adeptus_insights{{/str}}</span>
                            <span class="adeptus-info-value">{{site_name}}</span>
                        </div>
                        <div class="adeptus-info-item">
                            <span class="adeptus-info-label">{{#str}}moodle_version_label, report_adeptus_insights{{/str}}</span>
                            <span class="adeptus-info-value">{{moodle_version}}</span>
                        </div>
                        <div class="adeptus-info-item">
                            <span class="adeptus-info-label">{{#str}}php_version_label, report_adeptus_insights{{/str}}</span>
                            <span class="adeptus-info-value">{{php_version}}</span>
                        </div>
                    </div>
                </div>

                <div class="adeptus-step-actions">
                    <button class="btn-secondary btn-prev-step" data-step="welcome">
                        <i class="fa fa-arrow-left"></i> {{#str}}back, report_adeptus_insights{{/str}}
                    </button>
                    <button class="btn-primary btn-next-step" data-step="verification">
                        <i class="fa fa-arrow-right"></i> {{#str}}continue, report_adeptus_insights{{/str}}
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 3: Verification -->
        <div class="adeptus-wizard-step" id="step-verification">
            <div class="adeptus-step-header">
                <button class="adeptus-btn-back" id="back-to-admin-info">
                    <i class="fa fa-arrow-left"></i> {{#str}}back, report_adeptus_insights{{/str}}
                </button>
                <h2><span class="adeptus-step-number">3</span> {{#str}}verify_information, report_adeptus_insights{{/str}}</h2>
                <p>{{#str}}review_before_register, report_adeptus_insights{{/str}}</p>
            </div>

            <div class="adeptus-verification-container">
                <div class="adeptus-verification-summary">
                    <h3>{{#str}}registration_summary, report_adeptus_insights{{/str}}</h3>
                    <div class="adeptus-summary-grid">
                        <div class="adeptus-summary-item">
                            <span class="adeptus-summary-label">{{#str}}administrator_name_label, report_adeptus_insights{{/str}}</span>
                            <span class="adeptus-summary-value" id="summary-admin-name">-</span>
                        </div>
                        <div class="adeptus-summary-item">
                            <span class="adeptus-summary-label">{{#str}}email_address_label, report_adeptus_insights{{/str}}</span>
                            <span class="adeptus-summary-value" id="summary-admin-email">-</span>
                        </div>
                        <div class="adeptus-summary-item">
                            <span class="adeptus-summary-label">{{#str}}site_url_label, report_adeptus_insights{{/str}}</span>
                            <span class="adeptus-summary-value">{{site_url}}</span>
                        </div>
                        <div class="adeptus-summary-item">
                            <span class="adeptus-summary-label">{{#str}}site_name_label, report_adeptus_insights{{/str}}</span>
                            <span class="adeptus-summary-value">{{site_name}}</span>
                        </div>
                    </div>
                </div>

                <div class="adeptus-verification-notice">
                    <div class="adeptus-notice-icon">
                        <i class="fa fa-info-circle"></i>
                    </div>
                    <div class="adeptus-notice-content">
                        <h4>{{#str}}what_happens_next, report_adeptus_insights{{/str}}</h4>
                        <ul>
                            <li>{{#str}}registration_step_1, report_adeptus_insights{{/str}}</li>
                            <li>{{#str}}registration_step_2, report_adeptus_insights{{/str}}</li>
                            <li>{{#str}}registration_step_3, report_adeptus_insights{{/str}}</li>
                            <li>{{#str}}registration_step_4, report_adeptus_insights{{/str}}</li>
                        </ul>
                    </div>
                </div>

                <div class="adeptus-step-actions">
                    <button class="btn-secondary btn-prev-step" data-step="admin-info">
                        <i class="fa fa-arrow-left"></i> {{#str}}back, report_adeptus_insights{{/str}}
                    </button>
                    <button class="btn-primary btn-register-installation" id="register-installation">
                        <i class="fa fa-check"></i> {{#str}}register_installation, report_adeptus_insights{{/str}}
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 4: Success -->
        <div class="adeptus-wizard-step" id="step-success">
            <div class="adeptus-step-header">
                <h2><span class="adeptus-step-number">4</span> {{#str}}registration_complete, report_adeptus_insights{{/str}}</h2>
                <p>{{#str}}installation_registered, report_adeptus_insights{{/str}}</p>
            </div>

            <div class="adeptus-success-container">
                <div class="adeptus-success-icon">
                    <i class="fa fa-check-circle"></i>
                </div>

                <div class="adeptus-success-content">
                    <h3>{{#str}}welcome_adeptus_insights, report_adeptus_insights{{/str}}</h3>
                    <p>{{#str}}installation_ready, report_adeptus_insights{{/str}}</p>

                    <div class="adeptus-success-details">
                        <div class="adeptus-detail-item">
                            <span class="adeptus-detail-label">{{#str}}installation_id_label, report_adeptus_insights{{/str}}</span>
                            <span class="adeptus-detail-value" id="success-installation-id">-</span>
                        </div>
                        <div class="adeptus-detail-item">
                            <span class="adeptus-detail-label">{{#str}}api_key_label, report_adeptus_insights{{/str}}</span>
                            <span class="adeptus-detail-value" id="success-api-key">-</span>
                        </div>
                    </div>

                    <div class="adeptus-success-actions">
                        <button class="btn-primary btn-continue-to-subscription" id="continue-to-subscription">
                            <i class="fa fa-credit-card"></i> {{#str}}choose_subscription_plan, report_adeptus_insights{{/str}}
                        </button>
                        <button class="btn-secondary btn-go-to-dashboard" id="go-to-dashboard">
                            <i class="fa fa-dashboard"></i> {{#str}}go_to_dashboard, report_adeptus_insights{{/str}}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="adeptus-loading-overlay" id="loading-overlay">
        <div class="adeptus-loading-content">
            <div class="adeptus-loading-spinner"></div>
            <h3>{{#str}}registering_installation, report_adeptus_insights{{/str}}</h3>
            <p>{{#str}}setting_up_account, report_adeptus_insights{{/str}}</p>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="adeptus-popup-overlay" id="error-overlay">
        <div class="adeptus-popup-content error" id="error-content">
            <h3 id="error-title">{{#str}}registration_error, report_adeptus_insights{{/str}}</h3>
            <p id="error-message">{{#str}}registration_error_message, report_adeptus_insights{{/str}}</p>
            <button class="adeptus-btn-close" id="error-close">{{#str}}ok, report_adeptus_insights{{/str}}</button>
        </div>
    </div>

    <!-- Hidden Form for Submission -->
    <form id="registration-form" method="post" class="adeptus-hidden-form">
        <input type="hidden" name="action" value="register">
        <input type="hidden" name="sesskey" value="{{sesskey}}">
        <input type="hidden" name="admin_name" id="form-admin-name">
        <input type="hidden" name="admin_email" id="form-admin-email">
    </form>
</div>

