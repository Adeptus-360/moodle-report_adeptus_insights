{{!
    This file is part of Moodle - http://moodle.org/
    Registration Wizard Template - Modern, Beautiful, Multi-step Interface
    Note: Do NOT load Bootstrap from CDN - Moodle includes Bootstrap and loading another version breaks navigation
}}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>



{{#js}}
require(['jquery', 'core/ajax', 'core/notification', 'report_adeptus_insights/registration'], function($, Ajax, Notification, Registration) {
    // Initialize the registration wizard
    Registration.init();
});
{{/js}}

<div class="adeptus-wizard-container" id="registration-container">
    <!-- Header Section -->
    <div class="wizard-header">
        <div class="wizard-header-content">
            <h1 class="wizard-title">
                <i class="fa fa-rocket wizard-icon"></i>
                {{registration_title}}
            </h1>
            <p class="wizard-subtitle">{{#str}}registration_setup_subtitle, report_adeptus_insights{{/str}}</p>
        </div>
        <div class="wizard-user-info">
            <span class="user-welcome">Welcome, {{user_fullname}}</span>
        </div>
    </div>

    <!-- Main Registration Steps -->
    <div class="wizard-steps-container">
        
        <!-- Step 1: Welcome & Overview -->
        <div class="wizard-step active" id="step-welcome">
            <div class="step-header">
                <h2><span class="step-number">1</span> {{#str}}welcome_to_adeptus, report_adeptus_insights{{/str}}</h2>
                <p>{{#str}}lets_get_configured, report_adeptus_insights{{/str}}</p>
            </div>
            
            <div class="welcome-content">
                <div class="welcome-grid">
                    <div class="welcome-card">
                        <div class="welcome-icon">
                            <i class="fa fa-bar-chart"></i>
                        </div>
                        <h3>{{#str}}advanced_analytics, report_adeptus_insights{{/str}}</h3>
                        <p>{{#str}}advanced_analytics_desc, report_adeptus_insights{{/str}}</p>
                    </div>

                    <div class="welcome-card">
                        <div class="welcome-icon">
                            <i class="fa fa-magic"></i>
                        </div>
                        <h3>{{#str}}smart_reports, report_adeptus_insights{{/str}}</h3>
                        <p>{{#str}}smart_reports_desc, report_adeptus_insights{{/str}}</p>
                    </div>

                    <div class="welcome-card">
                        <div class="welcome-icon">
                            <i class="fa fa-cloud"></i>
                        </div>
                        <h3>{{#str}}cloud_integration, report_adeptus_insights{{/str}}</h3>
                        <p>{{#str}}cloud_integration_desc, report_adeptus_insights{{/str}}</p>
                    </div>
                </div>
                
                <div class="welcome-actions">
                    <button class="btn-primary btn-next-step" data-step="admin-info">
                        <i class="fa fa-arrow-right"></i> {{#str}}get_started, report_adeptus_insights{{/str}}
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 2: Admin Information -->
        <div class="wizard-step" id="step-admin-info">
            <div class="step-header">
                <button class="btn-back" id="back-to-welcome">
                    <i class="fa fa-arrow-left"></i> {{#str}}back, report_adeptus_insights{{/str}}
                </button>
                <h2><span class="step-number">2</span> {{#str}}administrator_information, report_adeptus_insights{{/str}}</h2>
                <p>{{#str}}tell_us_about_yourself, report_adeptus_insights{{/str}}</p>
            </div>
            
            <div class="admin-form-container">
                <div class="form-section">
                    <h3>{{#str}}personal_information, report_adeptus_insights{{/str}}</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="admin_name" class="form-label">{{#str}}full_name, report_adeptus_insights{{/str}} *</label>
                            <input type="text" id="admin_name" name="admin_name" class="form-control" required>
                            <small class="form-help">{{#str}}your_full_name_admin, report_adeptus_insights{{/str}}</small>
                        </div>

                        <div class="form-group">
                            <label for="admin_email" class="form-label">{{#str}}email_address, report_adeptus_insights{{/str}} *</label>
                            <input type="email" id="admin_email" name="admin_email" class="form-control" required>
                            <small class="form-help">{{#str}}email_notifications_help, report_adeptus_insights{{/str}}</small>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>{{#str}}installation_details, report_adeptus_insights{{/str}}</h3>
                    <div class="installation-info">
                        <div class="info-item">
                            <span class="info-label">{{#str}}site_url_label, report_adeptus_insights{{/str}}</span>
                            <span class="info-value">{{site_url}}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{#str}}site_name_label, report_adeptus_insights{{/str}}</span>
                            <span class="info-value">{{site_name}}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{#str}}moodle_version_label, report_adeptus_insights{{/str}}</span>
                            <span class="info-value">{{moodle_version}}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{#str}}php_version_label, report_adeptus_insights{{/str}}</span>
                            <span class="info-value">{{php_version}}</span>
                        </div>
                    </div>
                </div>
                
                <div class="step-actions">
                    <button class="btn-secondary btn-prev-step" data-step="welcome">
                        <i class="fa fa-arrow-left"></i> {{#str}}back, report_adeptus_insights{{/str}}
                    </button>
                    <button class="btn-primary btn-next-step" data-step="verification">
                        <i class="fa fa-arrow-right"></i> {{#str}}continue, report_adeptus_insights{{/str}}
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 3: Verification -->
        <div class="wizard-step" id="step-verification">
            <div class="step-header">
                <button class="btn-back" id="back-to-admin-info">
                    <i class="fa fa-arrow-left"></i> {{#str}}back, report_adeptus_insights{{/str}}
                </button>
                <h2><span class="step-number">3</span> {{#str}}verify_information, report_adeptus_insights{{/str}}</h2>
                <p>{{#str}}review_before_register, report_adeptus_insights{{/str}}</p>
            </div>
            
            <div class="verification-container">
                <div class="verification-summary">
                    <h3>{{#str}}registration_summary, report_adeptus_insights{{/str}}</h3>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <span class="summary-label">{{#str}}administrator_name_label, report_adeptus_insights{{/str}}</span>
                            <span class="summary-value" id="summary-admin-name">-</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">{{#str}}email_address_label, report_adeptus_insights{{/str}}</span>
                            <span class="summary-value" id="summary-admin-email">-</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">{{#str}}site_url_label, report_adeptus_insights{{/str}}</span>
                            <span class="summary-value">{{site_url}}</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">{{#str}}site_name_label, report_adeptus_insights{{/str}}</span>
                            <span class="summary-value">{{site_name}}</span>
                        </div>
                    </div>
                </div>
                
                <div class="verification-notice">
                    <div class="notice-icon">
                        <i class="fa fa-info-circle"></i>
                    </div>
                    <div class="notice-content">
                        <h4>{{#str}}what_happens_next, report_adeptus_insights{{/str}}</h4>
                        <ul>
                            <li>{{#str}}registration_step_1, report_adeptus_insights{{/str}}</li>
                            <li>{{#str}}registration_step_2, report_adeptus_insights{{/str}}</li>
                            <li>{{#str}}registration_step_3, report_adeptus_insights{{/str}}</li>
                            <li>{{#str}}registration_step_4, report_adeptus_insights{{/str}}</li>
                        </ul>
                    </div>
                </div>
                
                <div class="step-actions">
                    <button class="btn-secondary btn-prev-step" data-step="admin-info">
                        <i class="fa fa-arrow-left"></i> {{#str}}back, report_adeptus_insights{{/str}}
                    </button>
                    <button class="btn-primary btn-register-installation" id="register-installation">
                        <i class="fa fa-check"></i> {{#str}}register_installation, report_adeptus_insights{{/str}}
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 4: Success -->
        <div class="wizard-step" id="step-success">
            <div class="step-header">
                <h2><span class="step-number">4</span> {{#str}}registration_complete, report_adeptus_insights{{/str}}</h2>
                <p>{{#str}}installation_registered, report_adeptus_insights{{/str}}</p>
            </div>
            
            <div class="success-container">
                <div class="success-icon">
                    <i class="fa fa-check-circle"></i>
                </div>
                
                <div class="success-content">
                    <h3>{{#str}}welcome_adeptus_insights, report_adeptus_insights{{/str}}</h3>
                    <p>{{#str}}installation_ready, report_adeptus_insights{{/str}}</p>

                    <div class="success-details">
                        <div class="detail-item">
                            <span class="detail-label">{{#str}}installation_id_label, report_adeptus_insights{{/str}}</span>
                            <span class="detail-value" id="success-installation-id">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">{{#str}}api_key_label, report_adeptus_insights{{/str}}</span>
                            <span class="detail-value" id="success-api-key">-</span>
                        </div>
                    </div>

                    <div class="success-actions">
                        <button class="btn-primary btn-continue-to-subscription" id="continue-to-subscription">
                            <i class="fa fa-credit-card"></i> {{#str}}choose_subscription_plan, report_adeptus_insights{{/str}}
                        </button>
                        <button class="btn-secondary btn-go-to-dashboard" id="go-to-dashboard">
                            <i class="fa fa-dashboard"></i> {{#str}}go_to_dashboard, report_adeptus_insights{{/str}}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>{{#str}}registering_installation, report_adeptus_insights{{/str}}</h3>
            <p>{{#str}}setting_up_account, report_adeptus_insights{{/str}}</p>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="popup-overlay" id="error-overlay">
        <div class="popup-content error" id="error-content">
            <h3 id="error-title">{{#str}}registration_error, report_adeptus_insights{{/str}}</h3>
            <p id="error-message">{{#str}}registration_error_message, report_adeptus_insights{{/str}}</p>
            <button class="btn-close" id="error-close">{{#str}}ok, report_adeptus_insights{{/str}}</button>
        </div>
    </div>

    <!-- Hidden Form for Submission -->
    <form id="registration-form" method="post" class="hidden-form">
        <input type="hidden" name="action" value="register">
        <input type="hidden" name="sesskey" value="{{sesskey}}">
        <input type="hidden" name="admin_name" id="form-admin-name">
        <input type="hidden" name="admin_email" id="form-admin-email">
    </form>
</div>

{{#js}}
require(['report_adeptus_insights/registration'], function(Registration) {
    if (Registration && typeof Registration.init === 'function') {
        Registration.init();
    }
});
{{/js}} 

<style>
@media (min-width: 768px) {
    .pagelayout-standard #page.drawers .main-inner, body.limitedwidth #page.drawers .main-inner {
        max-width: 100% !important;
    }
}
</style>