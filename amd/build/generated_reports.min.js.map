{"version":3,"file":"generated_reports.min.js","sources":["../src/generated_reports.js"],"sourcesContent":["/**\n * Generated Reports AMD module for Adeptus Insights.\n *\n * @module     report_adeptus_insights/generated_reports\n * @package    report_adeptus_insights\n * @copyright  2026 Adeptus 360 <info@adeptus360.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/ajax', 'core/str', 'core/chartjs'], function($, Ajax, Str, Chart) {\n    'use strict';\n\n    /**\n     * String storage object - populated from core/str.\n     * @type {Object}\n     */\n    var STRINGS = {};\n\n    /**\n     * Load all localized strings from Moodle's language API.\n     * @returns {Promise}\n     */\n    var loadStrings = function() {\n        return Str.get_strings([\n            // General\n            {key: 'general', component: 'report_adeptus_insights'},\n            {key: 'wizard', component: 'report_adeptus_insights'},\n            {key: 'ai', component: 'report_adeptus_insights'},\n            {key: 'report', component: 'report_adeptus_insights'},\n            {key: 'report_details', component: 'report_adeptus_insights'},\n            {key: 'untitled_report', component: 'report_adeptus_insights'},\n            {key: 'unknown', component: 'report_adeptus_insights'},\n            {key: 'rows', component: 'report_adeptus_insights'},\n            {key: 'table', component: 'report_adeptus_insights'},\n            {key: 'chart', component: 'report_adeptus_insights'},\n            {key: 'retry', component: 'report_adeptus_insights'},\n            {key: 'cancel', component: 'report_adeptus_insights'},\n            {key: 'error', component: 'report_adeptus_insights'},\n            // Export\n            {key: 'export_pdf', component: 'report_adeptus_insights'},\n            {key: 'export_csv', component: 'report_adeptus_insights'},\n            {key: 'export_json', component: 'report_adeptus_insights'},\n            {key: 'exporting_as', component: 'report_adeptus_insights'},\n            {key: 'export_not_available', component: 'report_adeptus_insights'},\n            {key: 'export_not_eligible', component: 'report_adeptus_insights'},\n            {key: 'export_failed', component: 'report_adeptus_insights'},\n            {key: 'export_failed_message', component: 'report_adeptus_insights'},\n            {key: 'file_downloaded_success', component: 'report_adeptus_insights'},\n            {key: 'no_data', component: 'report_adeptus_insights'},\n            {key: 'no_data_to_export', component: 'report_adeptus_insights'},\n            {key: 'no_data_available', component: 'report_adeptus_insights'},\n            {key: 'no_data_rows', component: 'report_adeptus_insights'},\n            // Premium\n            {key: 'premium_export_format', component: 'report_adeptus_insights'},\n            {key: 'premium_feature', component: 'report_adeptus_insights'},\n            {key: 'upgrade_now', component: 'report_adeptus_insights'},\n            {key: 'free_plan_label', component: 'report_adeptus_insights'},\n            {key: 'free_plan_pdf_only', component: 'report_adeptus_insights'},\n            {key: 'paid_plans_label', component: 'report_adeptus_insights'},\n            {key: 'paid_plans_all_formats', component: 'report_adeptus_insights'},\n            {key: 'export_upgrade_message', component: 'report_adeptus_insights'},\n            // Categories\n            {key: 'categories', component: 'report_adeptus_insights'},\n            {key: 'create_new_category', component: 'report_adeptus_insights'},\n            {key: 'custom_color', component: 'report_adeptus_insights'},\n            {key: 'your_categories', component: 'report_adeptus_insights'},\n            {key: 'default_categories', component: 'report_adeptus_insights'},\n            {key: 'read_only', component: 'report_adeptus_insights'},\n            {key: 'no_custom_categories', component: 'report_adeptus_insights'},\n            {key: 'create_first_category', component: 'report_adeptus_insights'},\n            {key: 'category_created', component: 'report_adeptus_insights'},\n            {key: 'category_updated', component: 'report_adeptus_insights'},\n            {key: 'category_deleted', component: 'report_adeptus_insights'},\n            {key: 'edit_category', component: 'report_adeptus_insights'},\n            {key: 'delete_category', component: 'report_adeptus_insights'},\n            {key: 'delete_category_confirm', component: 'report_adeptus_insights'},\n            {key: 'delete_category_warning', component: 'report_adeptus_insights'},\n            {key: 'yes_delete', component: 'report_adeptus_insights'},\n            {key: 'category_name', component: 'report_adeptus_insights'},\n            {key: 'please_enter_category_name', component: 'report_adeptus_insights'},\n            {key: 'name', component: 'report_adeptus_insights'},\n            {key: 'color', component: 'report_adeptus_insights'},\n            {key: 'custom', component: 'report_adeptus_insights'},\n            {key: 'save_changes', component: 'report_adeptus_insights'},\n            // Reports\n            {key: 'select_a_report', component: 'report_adeptus_insights'},\n            {key: 'no_report_selected', component: 'report_adeptus_insights'},\n            {key: 'delete_report', component: 'report_adeptus_insights'},\n            {key: 'delete_report_confirm', component: 'report_adeptus_insights'},\n            {key: 'delete_report_warning', component: 'report_adeptus_insights'},\n            {key: 'deleting_report', component: 'report_adeptus_insights'},\n            {key: 'deleting_report_wait', component: 'report_adeptus_insights'},\n            {key: 'delete_failed', component: 'report_adeptus_insights'},\n            {key: 'report_deleted_success', component: 'report_adeptus_insights'},\n            {key: 'report_count', component: 'report_adeptus_insights'},\n            {key: 'reports_count', component: 'report_adeptus_insights'},\n            {key: 'you_have_reports_saved', component: 'report_adeptus_insights'},\n            // Loading/Errors\n            {key: 'session_expired', component: 'report_adeptus_insights'},\n            {key: 'refresh_page', component: 'report_adeptus_insights'},\n            {key: 'refresh_page_to_continue', component: 'report_adeptus_insights'},\n            {key: 'failed_to_load_reports', component: 'report_adeptus_insights'},\n            {key: 'try_again_later', component: 'report_adeptus_insights'},\n            {key: 'failed_to_execute_report', component: 'report_adeptus_insights'},\n            {key: 'failed_to_load_report_details', component: 'report_adeptus_insights'},\n            {key: 'failed_to_generate_report', component: 'report_adeptus_insights'},\n            {key: 'failed_to_execute_wizard_report', component: 'report_adeptus_insights'},\n            {key: 'authentication_required', component: 'report_adeptus_insights'},\n            {key: 'authentication_required_message', component: 'report_adeptus_insights'},\n            // DataTable\n            {key: 'search_reports', component: 'report_adeptus_insights'},\n            {key: 'no_reports_found', component: 'report_adeptus_insights'},\n            {key: 'showing_reports', component: 'report_adeptus_insights'},\n            {key: 'showing_first_rows', component: 'report_adeptus_insights'},\n            {key: 'export_to_see_all', component: 'report_adeptus_insights'},\n            // Chart\n            {key: 'chart_type', component: 'report_adeptus_insights'},\n            {key: 'bar_chart', component: 'report_adeptus_insights'},\n            {key: 'line_chart', component: 'report_adeptus_insights'},\n            {key: 'pie_chart', component: 'report_adeptus_insights'},\n            {key: 'doughnut_chart', component: 'report_adeptus_insights'},\n            {key: 'x_axis_labels', component: 'report_adeptus_insights'},\n            {key: 'y_axis_values', component: 'report_adeptus_insights'},\n            {key: 'error_rendering_chart', component: 'report_adeptus_insights'},\n            {key: 'loading', component: 'report_adeptus_insights'}\n        ]).then(function(results) {\n            // Map results to keys\n            var keys = [\n                'general', 'wizard', 'ai', 'report', 'reportDetails', 'untitledReport',\n                'unknown', 'rows', 'table', 'chart', 'retry', 'cancel', 'error',\n                'exportPdf', 'exportCsv', 'exportJson', 'exportingAs', 'exportNotAvailable',\n                'exportNotEligible', 'exportFailed', 'exportFailedMessage', 'fileDownloadedSuccess',\n                'noData', 'noDataToExport', 'noDataAvailable', 'noDataRows',\n                'premiumExportFormat', 'premiumFeature', 'upgradeNow', 'freePlan',\n                'freePlanPdfOnly', 'paidPlans', 'paidPlansAllFormats', 'exportUpgradeMessage',\n                'categories', 'createNewCategory', 'customColor', 'yourCategories',\n                'defaultCategories', 'readOnly', 'noCustomCategories', 'createFirstCategory',\n                'categoryCreated', 'categoryUpdated', 'categoryDeleted', 'editCategory',\n                'deleteCategory', 'deleteCategoryConfirm', 'deleteCategoryWarning', 'yesDelete',\n                'categoryName', 'pleaseEnterCategoryName', 'name', 'color', 'custom', 'saveChanges',\n                'selectAReport', 'noReportSelected', 'deleteReport', 'deleteReportConfirm',\n                'deleteReportWarning', 'deletingReport', 'deletingReportWait', 'deleteFailed',\n                'reportDeletedSuccess', 'reportCount', 'reportsCount', 'youHaveReportsSaved',\n                'sessionExpired', 'refreshPage', 'refreshPageToContinue', 'failedToLoadReports',\n                'tryAgainLater', 'failedToExecuteReport', 'failedToLoadReportDetails',\n                'failedToGenerateReport', 'failedToExecuteWizardReport',\n                'authenticationRequired', 'authenticationRequiredMessage',\n                'searchReports', 'noReportsFound', 'showingReports', 'showingFirstRows', 'exportToSeeAll',\n                'chartType', 'barChart', 'lineChart', 'pieChart', 'doughnutChart',\n                'xAxisLabels', 'yAxisValues', 'errorRenderingChart', 'loading'\n            ];\n            keys.forEach(function(key, index) {\n                STRINGS[key] = results[index] || key;\n            });\n            return STRINGS;\n        }).catch(function() {\n            // Provide fallback strings if loading fails\n            STRINGS = {\n                general: 'General',\n                wizard: 'Wizard',\n                ai: 'AI',\n                report: 'Report',\n                reportDetails: 'Report Details',\n                untitledReport: 'Untitled Report',\n                unknown: 'Unknown',\n                rows: 'rows',\n                table: 'Table',\n                chart: 'Chart',\n                retry: 'Retry',\n                cancel: 'Cancel',\n                error: 'Error',\n                exportPdf: 'Export PDF',\n                exportCsv: 'Export CSV',\n                exportJson: 'Export JSON',\n                exportingAs: 'Exporting as {format}...',\n                exportNotAvailable: 'Export Not Available',\n                exportNotEligible: 'Export not eligible',\n                exportFailed: 'Export Failed',\n                exportFailedMessage: 'Failed to export report',\n                fileDownloadedSuccess: 'file downloaded successfully',\n                noData: 'No Data',\n                noDataToExport: 'No data to export',\n                noDataAvailable: 'No data available',\n                noDataRows: 'This report contains no data rows',\n                premiumExportFormat: 'Premium Export Format',\n                premiumFeature: 'Premium Feature',\n                upgradeNow: 'Upgrade Now',\n                freePlan: 'Free Plan:',\n                freePlanPdfOnly: 'PDF export only',\n                paidPlans: 'Paid Plans:',\n                paidPlansAllFormats: 'All formats (PDF, CSV, JSON)',\n                exportUpgradeMessage: '{format} export requires a paid plan',\n                categories: 'Categories',\n                createNewCategory: 'Create New Category',\n                customColor: 'Custom color',\n                yourCategories: 'Your Categories',\n                defaultCategories: 'Default Categories',\n                readOnly: 'Read Only',\n                noCustomCategories: 'No custom categories yet',\n                createFirstCategory: 'Create your first category above',\n                categoryCreated: 'Category Created',\n                categoryUpdated: 'Category Updated',\n                categoryDeleted: 'Category Deleted',\n                editCategory: 'Edit Category',\n                deleteCategory: 'Delete Category',\n                deleteCategoryConfirm: 'Delete Category?',\n                deleteCategoryWarning: 'Are you sure you want to delete {name}?',\n                yesDelete: 'Yes, Delete',\n                categoryName: 'Category name',\n                pleaseEnterCategoryName: 'Please enter a category name',\n                name: 'Name',\n                color: 'Color',\n                custom: 'Custom',\n                saveChanges: 'Save Changes',\n                selectAReport: 'Select a Report',\n                noReportSelected: 'No Report Selected',\n                deleteReport: 'Delete Report',\n                deleteReportConfirm: 'Delete Report?',\n                deleteReportWarning: 'Are you sure you want to delete {name}?',\n                deletingReport: 'Deleting Report',\n                deletingReportWait: 'Please wait...',\n                deleteFailed: 'Delete Failed',\n                reportDeletedSuccess: 'Report deleted successfully',\n                reportCount: '1 report',\n                reportsCount: 'reports',\n                youHaveReportsSaved: 'You have {count} saved',\n                sessionExpired: 'Session Expired',\n                refreshPage: 'Refresh Page',\n                refreshPageToContinue: 'Please refresh the page to continue',\n                failedToLoadReports: 'Failed to Load Reports',\n                tryAgainLater: 'Please try again later',\n                failedToExecuteReport: 'Failed to execute report',\n                failedToLoadReportDetails: 'Failed to load report details',\n                failedToGenerateReport: 'Failed to generate report',\n                failedToExecuteWizardReport: 'Failed to execute wizard report',\n                authenticationRequired: 'Authentication Required',\n                authenticationRequiredMessage: 'Please ensure you are logged in',\n                searchReports: 'Search reports...',\n                noReportsFound: 'No reports found',\n                showingReports: 'Showing reports',\n                showingFirstRows: 'Showing first {first} of {total} rows',\n                exportToSeeAll: 'Export to see all data',\n                chartType: 'Chart Type',\n                barChart: 'Bar Chart',\n                lineChart: 'Line Chart',\n                pieChart: 'Pie Chart',\n                doughnutChart: 'Doughnut Chart',\n                xAxisLabels: 'X-Axis (Labels)',\n                yAxisValues: 'Y-Axis (Values)',\n                errorRenderingChart: 'Error rendering chart',\n                loading: 'Loading...'\n            };\n            return STRINGS;\n        });\n    };\n\n    /**\n     * Main GeneratedReports object.\n     * @type {Object}\n     */\n    var GeneratedReports = {\n        backendUrl: '',\n        cachedReports: [],\n        cachedCategories: [],\n        currentReport: null,\n        currentReportData: null,\n        reportsDataTable: null,\n        retryCount: 0,\n        maxRetries: 3,\n        currentView: 'table',\n        chartInstance: null,\n        Chart: Chart,\n        strings: STRINGS,\n        isFreePlan: true,\n\n        /**\n         * Initialize the module.\n         * @param {Object} config - Configuration object from PHP.\n         */\n        init: function(config) {\n            var self = this;\n            self.backendUrl = config.backendUrl || '';\n            self.isFreePlan = config.isFreePlan !== false;\n            self.strings = STRINGS;\n\n            self.loadReports();\n            self.loadCategories();\n            self.bindViewToggle();\n            self.bindCategoryManagement();\n        },\n\n        /**\n         * Show upgrade prompt for premium export formats.\n         * @param {string} format - The export format.\n         */\n        showExportUpgradePrompt: function(format) {\n            var subscriptionUrl = M.cfg.wwwroot + '/report/adeptus_insights/subscription.php';\n            var formatNames = {\n                'csv': 'CSV',\n                'excel': 'Excel',\n                'json': 'JSON'\n            };\n            var formatName = formatNames[format] || format.toUpperCase();\n\n            Swal.fire({\n                title: STRINGS.premiumExportFormat,\n                html: '<div style=\"text-align: center; padding: 20px;\">' +\n                    '<div style=\"font-size: 48px; color: #f39c12; margin-bottom: 15px;\">' +\n                    '<i class=\"fa fa-crown\"></i></div>' +\n                    '<h3 style=\"color: #2c3e50; margin-bottom: 15px;\">' + formatName + ' ' + STRINGS.premiumFeature + '</h3>' +\n                    '<p style=\"color: #7f8c8d; font-size: 16px; line-height: 1.6; margin-bottom: 25px;\">' +\n                    STRINGS.exportUpgradeMessage.replace('{format}', formatName) + '</p>' +\n                    '<div style=\"background: #ecf0f1; padding: 15px; border-radius: 8px; margin-bottom: 20px;\">' +\n                    '<p style=\"margin: 0; font-size: 14px; color: #34495e;\">' +\n                    '<strong>' + STRINGS.freePlan + '</strong> ' + STRINGS.freePlanPdfOnly + '<br>' +\n                    '<strong>' + STRINGS.paidPlans + '</strong> ' + STRINGS.paidPlansAllFormats + '</p></div></div>',\n                showCancelButton: true,\n                confirmButtonText: '<i class=\"fa fa-arrow-up\"></i> ' + STRINGS.upgradeNow,\n                cancelButtonText: '<i class=\"fa fa-times\"></i> ' + STRINGS.cancel,\n                confirmButtonColor: '#3498db',\n                cancelButtonColor: '#95a5a6',\n                width: 500\n            }).then(function(result) {\n                if (result.isConfirmed) {\n                    window.open(subscriptionUrl, '_blank');\n                }\n            });\n        },\n\n        /**\n         * Check export eligibility before exporting using external service.\n         * @param {string} format - The export format.\n         * @returns {Promise}\n         */\n        checkExportEligibility: function(format) {\n            return new Promise(function(resolve) {\n                Ajax.call([{\n                    methodname: 'report_adeptus_insights_check_export_eligibility',\n                    args: {format: format}\n                }])[0].done(function(result) {\n                    var data = result.data ? result.data : result;\n                    resolve(data);\n                }).fail(function(error) {\n                    window.console.error('Error checking export eligibility:', error);\n                    resolve({success: false, eligible: false, message: 'Unable to verify export eligibility.'});\n                });\n            });\n        },\n\n        /**\n         * Capture chart as image for PDF export.\n         * Uses native toDataURL with html2canvas fallback.\n         * @returns {Promise}\n         */\n        captureChartImage: function() {\n            var self = this;\n\n            return new Promise(function(resolve) {\n                // Wait for chart animation to complete\n                setTimeout(function() {\n                    var chartCanvas = document.getElementById('report-chart');\n                    if (!chartCanvas) {\n                        window.console.warn('[GeneratedReports] Chart canvas not found');\n                        resolve(null);\n                        return;\n                    }\n\n                    // Method 1: Native canvas toDataURL (fastest, most reliable)\n                    try {\n                        var dataUrl = chartCanvas.toDataURL('image/png', 0.8);\n                        if (dataUrl && dataUrl.length > 100 && dataUrl.length < 2000000) {\n                            window.console.log('[GeneratedReports] Chart captured via toDataURL, size:', dataUrl.length);\n                            resolve(dataUrl);\n                            return;\n                        }\n                    } catch (e) {\n                        window.console.warn('[GeneratedReports] Native canvas capture failed:', e);\n                    }\n\n                    // Method 2: html2canvas fallback (handles CORS/tainted canvas)\n                    self.loadHtml2Canvas().then(function() {\n                        if (window.html2canvas) {\n                            window.html2canvas(chartCanvas, {\n                                backgroundColor: '#ffffff',\n                                scale: 1.5,\n                                useCORS: true,\n                                allowTaint: true,\n                                logging: false\n                            }).then(function(capturedCanvas) {\n                                var dataUrl = capturedCanvas.toDataURL('image/png', 0.8);\n                                if (dataUrl && dataUrl.length > 100 && dataUrl.length < 2000000) {\n                                    window.console.log('[GeneratedReports] Chart captured via html2canvas, size:', dataUrl.length);\n                                    resolve(dataUrl);\n                                    return;\n                                }\n                                resolve(null);\n                            }).catch(function() {\n                                resolve(null);\n                            });\n                        } else {\n                            resolve(null);\n                        }\n                    }).catch(function() {\n                        resolve(null);\n                    });\n                }, 300);\n            });\n        },\n\n        /**\n         * Load html2canvas library from CDN.\n         * @returns {Promise}\n         */\n        loadHtml2Canvas: function() {\n            return new Promise(function(resolve, reject) {\n                if (window.html2canvas) {\n                    resolve();\n                    return;\n                }\n                var script = document.createElement('script');\n                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';\n                script.onload = function() {\n                    resolve();\n                };\n                script.onerror = function() {\n                    reject(new Error('Failed to load html2canvas'));\n                };\n                document.head.appendChild(script);\n            });\n        },\n\n        /**\n         * Show toast notification.\n         * @param {string} message - The message to display.\n         * @param {string} type - The type of toast (success, error, warning, info).\n         */\n        showToast: function(message, type) {\n            type = type || 'success';\n            var toastContainer = document.getElementById('adeptus-toast-container');\n            if (!toastContainer) {\n                toastContainer = document.createElement('div');\n                toastContainer.id = 'adeptus-toast-container';\n                toastContainer.style.cssText = 'position: fixed; top: 20px; right: 20px; z-index: 10000;';\n                document.body.appendChild(toastContainer);\n            }\n\n            var iconMap = {\n                'success': 'fa-check-circle',\n                'error': 'fa-times-circle',\n                'warning': 'fa-exclamation-triangle',\n                'info': 'fa-info-circle'\n            };\n            var bgColorMap = {\n                'success': '#28a745',\n                'error': '#dc3545',\n                'warning': '#ffc107',\n                'info': '#17a2b8'\n            };\n            var textColorMap = {\n                'success': 'white',\n                'error': 'white',\n                'warning': '#212529',\n                'info': 'white'\n            };\n\n            var toast = document.createElement('div');\n            toast.style.cssText = 'background: ' + bgColorMap[type] + '; color: ' + textColorMap[type] +\n                '; padding: 12px 20px; border-radius: 8px; margin-bottom: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);' +\n                ' display: flex; align-items: center; gap: 10px; animation: slideIn 0.3s ease; min-width: 280px;';\n            toast.innerHTML = '<i class=\"fa ' + iconMap[type] + '\"></i><span>' + message + '</span>';\n            toastContainer.appendChild(toast);\n\n            setTimeout(function() {\n                toast.style.animation = 'slideOut 0.3s ease forwards';\n                setTimeout(function() {\n                    if (toast.parentNode) {\n                        toast.parentNode.removeChild(toast);\n                    }\n                }, 300);\n            }, 3000);\n        },\n\n        /**\n         * Track export for usage monitoring.\n         * @param {string} format - The export format.\n         * @param {string} reportName - The report name.\n         */\n        trackExport: function(format, reportName) {\n            fetch(M.cfg.wwwroot + '/report/adeptus_insights/ajax/track_export.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                body: 'format=' + encodeURIComponent(format) + '&report_name=' + encodeURIComponent(reportName) +\n                    '&sesskey=' + M.cfg.sesskey\n            })\n            .then(function(response) {\n                return response.json();\n            })\n            .then(function(data) {\n                window.console.log('[GeneratedReports] Export tracked:', data);\n            })\n            .catch(function(error) {\n                window.console.error('[GeneratedReports] Error tracking export:', error);\n            });\n        },\n\n        /**\n         * Bind view toggle button handlers.\n         */\n        bindViewToggle: function() {\n            var self = this;\n            $(document).on('click', '.adeptus-view-toggle-btn', function() {\n                var view = $(this).data('view');\n                self.switchView(view);\n            });\n            $(document).on('change', '#chart-type-select, #chart-x-axis, #chart-y-axis', function() {\n                self.renderChart();\n            });\n        },\n\n        /**\n         * Bind category management button handler.\n         */\n        bindCategoryManagement: function() {\n            var self = this;\n            $('#manage-categories-btn').on('click', function() {\n                self.showCategoryManagementModal();\n            });\n        },\n\n        /**\n         * Load categories from server.\n         */\n        loadCategories: function() {\n            var self = this;\n\n            $.ajax({\n                url: M.cfg.wwwroot + '/report/adeptus_insights/ajax/manage_category.php',\n                method: 'POST',\n                dataType: 'json',\n                data: {\n                    action: 'list',\n                    sesskey: M.cfg.sesskey\n                },\n                success: function(response) {\n                    if (response.success && response.data) {\n                        self.cachedCategories = response.data;\n                    }\n                },\n                error: function() {\n                    self.cachedCategories = [];\n                }\n            });\n        },\n\n        /**\n         * Show category management modal.\n         */\n        showCategoryManagementModal: function() {\n            var self = this;\n\n            // Separate system and custom categories\n            var systemCategories = self.cachedCategories.filter(function(c) {\n                return c.is_system;\n            });\n            var customCategories = self.cachedCategories.filter(function(c) {\n                return !c.is_system;\n            });\n\n            // Preset colors for quick selection\n            var presetColors = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899', '#06b6d4', '#84cc16'];\n\n            // Build custom categories HTML\n            var customCategoriesHtml = customCategories.length > 0 ?\n                customCategories.map(function(cat) {\n                    return '<div class=\"adeptus-cat-card\" data-id=\"' + cat.id + '\">' +\n                        '<div class=\"adeptus-cat-card-color\" style=\"background: ' + (cat.color || '#6c757d') + ';\"></div>' +\n                        '<div class=\"adeptus-cat-card-content\">' +\n                            '<div class=\"adeptus-cat-card-name\">' + cat.name + '</div>' +\n                            '<div class=\"adeptus-cat-card-meta\">' + (cat.report_count || 0) + ' report' +\n                            (cat.report_count !== 1 ? 's' : '') + '</div>' +\n                        '</div>' +\n                        '<div class=\"adeptus-cat-card-actions\">' +\n                            '<button class=\"adeptus-cat-action-btn edit-cat-btn\" data-id=\"' + cat.id + '\" title=\"Edit\">' +\n                                '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" ' +\n                                'stroke-width=\"2\"><path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\">' +\n                                '</path><path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path></svg>' +\n                            '</button>' +\n                            '<button class=\"adeptus-cat-action-btn adeptus-cat-action-btn-danger delete-cat-btn\" ' +\n                            'data-id=\"' + cat.id + '\" title=\"Delete\">' +\n                                '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" ' +\n                                'stroke-width=\"2\"><polyline points=\"3 6 5 6 21 6\"></polyline><path d=\"M19 6v14a2 2 0 ' +\n                                '0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path></svg>' +\n                            '</button>' +\n                        '</div>' +\n                    '</div>';\n                }).join('') :\n                '<div class=\"adeptus-cat-empty-state\">' +\n                    '<div class=\"adeptus-cat-empty-icon\">' +\n                        '<svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" ' +\n                        'stroke-width=\"1.5\"><path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 ' +\n                        '2 0 0 1 2 2z\"></path><line x1=\"12\" y1=\"11\" x2=\"12\" y2=\"17\"></line><line x1=\"9\" y1=\"14\" ' +\n                        'x2=\"15\" y2=\"14\"></line></svg>' +\n                    '</div>' +\n                    '<div class=\"adeptus-cat-empty-text\">' + STRINGS.noCustomCategories + '</div>' +\n                    '<div class=\"adeptus-cat-empty-hint\">' + STRINGS.createFirstCategory + '</div>' +\n                '</div>';\n\n            // Build system categories HTML\n            var systemCategoriesHtml = systemCategories.map(function(cat) {\n                return '<div class=\"adeptus-cat-system-item\">' +\n                    '<span class=\"adeptus-cat-system-dot\" style=\"background: ' + (cat.color || '#6c757d') + ';\"></span>' +\n                    '<span class=\"adeptus-cat-system-name\">' + cat.name + '</span>' +\n                    '<span class=\"adeptus-cat-system-count\">' + (cat.report_count || 0) + '</span>' +\n                '</div>';\n            }).join('');\n\n            // Build color swatches HTML\n            var colorSwatchesHtml = presetColors.map(function(color) {\n                return '<button type=\"button\" class=\"adeptus-cat-color-swatch\" data-color=\"' + color +\n                    '\" style=\"background: ' + color + ';\"></button>';\n            }).join('');\n\n            Swal.fire({\n                title: STRINGS.categories,\n                html: '<div class=\"adeptus-cat-modal\">' +\n                    '<div class=\"adeptus-cat-add-section\">' +\n                        '<div class=\"adeptus-cat-add-header\">' + STRINGS.createNewCategory + '</div>' +\n                        '<div class=\"adeptus-cat-add-form\">' +\n                            '<div class=\"adeptus-cat-add-input-wrapper\">' +\n                                '<input type=\"text\" id=\"new-category-name\" class=\"adeptus-cat-add-input\" ' +\n                                'placeholder=\"' + STRINGS.categoryName + '\">' +\n                                '<div class=\"adeptus-cat-add-color-wrapper\">' +\n                                    '<button type=\"button\" class=\"adeptus-cat-add-color-btn\" id=\"color-picker-toggle\">' +\n                                        '<span class=\"adeptus-cat-add-color-preview\" id=\"selected-color-preview\" ' +\n                                        'style=\"background: #3b82f6;\"></span>' +\n                                        '<svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" ' +\n                                        'stroke=\"currentColor\" stroke-width=\"2\"><polyline points=\"6 9 12 15 18 9\">' +\n                                        '</polyline></svg>' +\n                                    '</button>' +\n                                    '<div class=\"adeptus-cat-color-dropdown\" id=\"color-dropdown\">' +\n                                        '<div class=\"adeptus-cat-color-swatches\">' + colorSwatchesHtml + '</div>' +\n                                        '<div class=\"adeptus-cat-color-custom\">' +\n                                            '<input type=\"color\" id=\"new-category-color\" value=\"#3b82f6\">' +\n                                            '<span>' + STRINGS.customColor + '</span>' +\n                                        '</div>' +\n                                    '</div>' +\n                                '</div>' +\n                            '</div>' +\n                            '<button type=\"button\" class=\"adeptus-cat-add-btn\" id=\"add-category-btn\">' +\n                                '<svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" ' +\n                                'stroke-width=\"2.5\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" ' +\n                                'x2=\"19\" y2=\"12\"></line></svg> Add' +\n                            '</button>' +\n                        '</div>' +\n                    '</div>' +\n                    '<div class=\"adeptus-cat-section\">' +\n                        '<div class=\"adeptus-cat-section-header\">' +\n                            '<span class=\"adeptus-cat-section-title\">' + STRINGS.yourCategories + '</span>' +\n                            '<span class=\"adeptus-cat-section-count\">' + customCategories.length + '</span>' +\n                        '</div>' +\n                        '<div class=\"adeptus-cat-cards-list\">' + customCategoriesHtml + '</div>' +\n                    '</div>' +\n                    '<div class=\"adeptus-cat-section adeptus-cat-section-system\">' +\n                        '<div class=\"adeptus-cat-section-header\">' +\n                            '<span class=\"adeptus-cat-section-title\">' + STRINGS.defaultCategories + '</span>' +\n                            '<span class=\"adeptus-cat-section-badge\">' + STRINGS.readOnly + '</span>' +\n                        '</div>' +\n                        '<div class=\"adeptus-cat-system-list\">' + systemCategoriesHtml + '</div>' +\n                    '</div>' +\n                '</div>',\n                showConfirmButton: false,\n                showCloseButton: true,\n                width: '480px',\n                customClass: {\n                    popup: 'adeptus-cat-modal-popup',\n                    title: 'adeptus-cat-modal-title',\n                    closeButton: 'adeptus-cat-modal-close',\n                    htmlContainer: 'adeptus-cat-modal-container'\n                },\n                didOpen: function() {\n                    var selectedColor = '#3b82f6';\n\n                    $('#color-picker-toggle').on('click', function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        var dropdown = $('#color-dropdown');\n                        dropdown.toggleClass('show');\n                    });\n\n                    $('#color-dropdown').on('click', function(e) {\n                        e.stopPropagation();\n                    });\n\n                    $(document).on('click.colorDropdown', function(e) {\n                        if (!$(e.target).closest('.adeptus-cat-add-color-wrapper').length) {\n                            $('#color-dropdown').removeClass('show');\n                        }\n                    });\n\n                    $('.adeptus-cat-color-swatch').on('click', function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        selectedColor = $(this).data('color');\n                        $('#selected-color-preview').css('background', selectedColor);\n                        $('#new-category-color').val(selectedColor);\n                        $('#color-dropdown').removeClass('show');\n                    });\n\n                    $('#new-category-color').on('input change', function(e) {\n                        e.stopPropagation();\n                        selectedColor = $(this).val();\n                        $('#selected-color-preview').css('background', selectedColor);\n                    });\n\n                    $('#add-category-btn').on('click', function() {\n                        var name = $('#new-category-name').val().trim();\n                        if (name) {\n                            self.createCategory(name, selectedColor);\n                        } else {\n                            $('#new-category-name').addClass('error').focus();\n                            setTimeout(function() {\n                                $('#new-category-name').removeClass('error');\n                            }, 500);\n                        }\n                    });\n\n                    $('#new-category-name').on('keypress', function(e) {\n                        if (e.which === 13) {\n                            $('#add-category-btn').click();\n                        }\n                    });\n\n                    $('.edit-cat-btn').on('click', function(e) {\n                        e.stopPropagation();\n                        var catId = $(this).data('id');\n                        var cat = self.cachedCategories.find(function(c) {\n                            return c.id == catId;\n                        });\n                        if (cat) {\n                            $(document).off('click.colorDropdown');\n                            self.showEditCategoryDialog(cat);\n                        }\n                    });\n\n                    $('.delete-cat-btn').on('click', function(e) {\n                        e.stopPropagation();\n                        var catId = $(this).data('id');\n                        var cat = self.cachedCategories.find(function(c) {\n                            return c.id == catId;\n                        });\n                        if (cat) {\n                            $(document).off('click.colorDropdown');\n                            self.confirmDeleteCategory(cat);\n                        }\n                    });\n                },\n                willClose: function() {\n                    $(document).off('click.colorDropdown');\n                }\n            });\n        },\n\n        /**\n         * Create a new category.\n         * @param {string} name - The category name.\n         * @param {string} color - The category color.\n         */\n        createCategory: function(name, color) {\n            var self = this;\n\n            $.ajax({\n                url: M.cfg.wwwroot + '/report/adeptus_insights/ajax/manage_category.php',\n                method: 'POST',\n                dataType: 'json',\n                data: {\n                    action: 'create',\n                    name: name,\n                    color: color,\n                    sesskey: M.cfg.sesskey\n                },\n                success: function(response) {\n                    if (response.success) {\n                        self.cachedCategories.push(response.data);\n                        Swal.close();\n                        Swal.fire({\n                            icon: 'success',\n                            title: STRINGS.categoryCreated,\n                            timer: 1500,\n                            showConfirmButton: false\n                        }).then(function() {\n                            self.showCategoryManagementModal();\n                        });\n                    } else {\n                        Swal.showValidationMessage(response.message);\n                    }\n                },\n                error: function(xhr) {\n                    var msg = (xhr.responseJSON && xhr.responseJSON.message) || 'Failed to create category';\n                    Swal.fire({icon: 'error', title: STRINGS.error, text: msg});\n                }\n            });\n        },\n\n        /**\n         * Show edit category dialog.\n         * @param {Object} category - The category to edit.\n         */\n        showEditCategoryDialog: function(category) {\n            var self = this;\n            var presetColors = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899', '#06b6d4', '#84cc16'];\n\n            var colorSwatchesHtml = presetColors.map(function(color) {\n                var isSelected = color.toLowerCase() === (category.color || '#6c757d').toLowerCase();\n                return '<button type=\"button\" class=\"adeptus-edit-color-swatch' + (isSelected ? ' selected' : '') +\n                    '\" data-color=\"' + color + '\" style=\"background: ' + color + ';\"></button>';\n            }).join('');\n\n            Swal.fire({\n                title: STRINGS.editCategory,\n                html: '<div class=\"adeptus-cat-edit-modal\">' +\n                    '<div class=\"adeptus-cat-edit-preview\" id=\"edit-preview\">' +\n                        '<div class=\"adeptus-cat-edit-preview-color\" id=\"edit-preview-color\" style=\"background: ' +\n                        (category.color || '#6c757d') + ';\"></div>' +\n                        '<span class=\"adeptus-cat-edit-preview-name\" id=\"edit-preview-name\">' + category.name +\n                        '</span>' +\n                    '</div>' +\n                    '<div class=\"adeptus-cat-edit-field\">' +\n                        '<label class=\"adeptus-cat-edit-label\">' + STRINGS.name + '</label>' +\n                        '<input type=\"text\" id=\"edit-cat-name\" class=\"adeptus-cat-edit-input\" value=\"' +\n                        category.name.replace(/\"/g, '&quot;') + '\">' +\n                    '</div>' +\n                    '<div class=\"adeptus-cat-edit-field\">' +\n                        '<label class=\"adeptus-cat-edit-label\">' + STRINGS.color + '</label>' +\n                        '<div class=\"adeptus-cat-edit-colors\">' +\n                            '<div class=\"adeptus-cat-edit-swatches\">' + colorSwatchesHtml + '</div>' +\n                            '<div class=\"adeptus-cat-edit-custom\">' +\n                                '<input type=\"color\" id=\"edit-adeptus-cat-color\" value=\"' +\n                                (category.color || '#6c757d') + '\">' +\n                                '<span>' + STRINGS.custom + '</span>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>' +\n                '</div>',\n                showCancelButton: true,\n                confirmButtonText: STRINGS.saveChanges,\n                cancelButtonText: STRINGS.cancel,\n                customClass: {\n                    popup: 'adeptus-cat-edit-popup',\n                    confirmButton: 'adeptus-cat-edit-confirm-btn',\n                    cancelButton: 'adeptus-cat-edit-cancel-btn'\n                },\n                didOpen: function() {\n                    var selectedColor = category.color || '#6c757d';\n\n                    $('#edit-cat-name').on('input', function() {\n                        $('#edit-preview-name').text($(this).val() || 'Category');\n                    });\n\n                    $('.adeptus-edit-color-swatch').on('click', function() {\n                        selectedColor = $(this).data('color');\n                        $('.adeptus-edit-color-swatch').removeClass('selected');\n                        $(this).addClass('selected');\n                        $('#edit-preview-color').css('background', selectedColor);\n                        $('#edit-adeptus-cat-color').val(selectedColor);\n                    });\n\n                    $('#edit-adeptus-cat-color').on('input', function() {\n                        selectedColor = $(this).val();\n                        $('.adeptus-edit-color-swatch').removeClass('selected');\n                        $('#edit-preview-color').css('background', selectedColor);\n                    });\n                },\n                preConfirm: function() {\n                    var name = document.getElementById('edit-cat-name').value.trim();\n                    var color = document.getElementById('edit-adeptus-cat-color').value;\n                    if (!name) {\n                        Swal.showValidationMessage(STRINGS.pleaseEnterCategoryName);\n                        return false;\n                    }\n                    return {name: name, color: color};\n                }\n            }).then(function(result) {\n                if (result.isConfirmed) {\n                    self.updateCategory(category.id, result.value.name, result.value.color);\n                }\n            });\n        },\n\n        /**\n         * Update a category.\n         * @param {number} categoryId - The category ID.\n         * @param {string} name - The new name.\n         * @param {string} color - The new color.\n         */\n        updateCategory: function(categoryId, name, color) {\n            var self = this;\n\n            $.ajax({\n                url: M.cfg.wwwroot + '/report/adeptus_insights/ajax/manage_category.php',\n                method: 'POST',\n                dataType: 'json',\n                data: {\n                    action: 'update',\n                    category_id: categoryId,\n                    name: name,\n                    color: color,\n                    sesskey: M.cfg.sesskey\n                },\n                success: function(response) {\n                    if (response.success) {\n                        var idx = self.cachedCategories.findIndex(function(c) {\n                            return c.id == categoryId;\n                        });\n                        if (idx !== -1) {\n                            self.cachedCategories[idx] = response.data;\n                        }\n                        Swal.fire({\n                            icon: 'success',\n                            title: STRINGS.categoryUpdated,\n                            timer: 1500,\n                            showConfirmButton: false\n                        }).then(function() {\n                            self.showCategoryManagementModal();\n                        });\n                    } else {\n                        Swal.fire({icon: 'error', title: STRINGS.error, text: response.message});\n                    }\n                },\n                error: function(xhr) {\n                    var msg = (xhr.responseJSON && xhr.responseJSON.message) || '';\n                    Swal.fire({icon: 'error', title: STRINGS.error, text: msg});\n                }\n            });\n        },\n\n        /**\n         * Confirm delete category dialog.\n         * @param {Object} category - The category to delete.\n         */\n        confirmDeleteCategory: function(category) {\n            var self = this;\n\n            Swal.fire({\n                title: STRINGS.deleteCategoryConfirm,\n                html: '<p>' + STRINGS.deleteCategoryWarning.replace('{name}', '<strong>' + category.name +\n                    '</strong>') + '</p>',\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#dc3545',\n                confirmButtonText: STRINGS.yesDelete,\n                cancelButtonText: STRINGS.cancel\n            }).then(function(result) {\n                if (result.isConfirmed) {\n                    self.deleteCategory(category.id);\n                }\n            });\n        },\n\n        /**\n         * Delete a category.\n         * @param {number} categoryId - The category ID to delete.\n         */\n        deleteCategory: function(categoryId) {\n            var self = this;\n\n            $.ajax({\n                url: M.cfg.wwwroot + '/report/adeptus_insights/ajax/manage_category.php',\n                method: 'POST',\n                dataType: 'json',\n                data: {\n                    action: 'delete',\n                    category_id: categoryId,\n                    sesskey: M.cfg.sesskey\n                },\n                success: function(response) {\n                    if (response.success) {\n                        self.cachedCategories = self.cachedCategories.filter(function(c) {\n                            return c.id != categoryId;\n                        });\n                        Swal.fire({\n                            icon: 'success',\n                            title: STRINGS.categoryDeleted,\n                            timer: 2000,\n                            showConfirmButton: false\n                        }).then(function() {\n                            self.showCategoryManagementModal();\n                        });\n                    } else {\n                        Swal.fire({icon: 'error', title: STRINGS.error, text: response.message});\n                    }\n                },\n                error: function(xhr) {\n                    var msg = (xhr.responseJSON && xhr.responseJSON.message) || 'Failed to delete category';\n                    Swal.fire({icon: 'error', title: STRINGS.error, text: msg});\n                }\n            });\n        },\n\n        /**\n         * Show delete confirmation dialog for a report.\n         * @param {Object} report - The report to delete.\n         */\n        confirmDeleteReport: function(report) {\n            var self = this;\n\n            if (!report) {\n                report = self.currentReport;\n            }\n\n            if (!report || !report.slug) {\n                Swal.fire({\n                    icon: 'warning',\n                    title: STRINGS.noReportSelected,\n                    text: STRINGS.selectAReport\n                });\n                return;\n            }\n\n            var reportName = report.description || report.name || STRINGS.untitledReport;\n            var source = (report.source || 'assistant').toLowerCase();\n            var sourceLabel = source === 'wizard' ? STRINGS.wizard : STRINGS.ai;\n\n            Swal.fire({\n                title: STRINGS.deleteReportConfirm,\n                html: '<p>' + STRINGS.deleteReportWarning.replace('{name}', '<strong>' + reportName +\n                    '</strong>') + '</p>',\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#dc3545',\n                confirmButtonText: '<i class=\"fa fa-trash\"></i> ' + STRINGS.yesDelete,\n                cancelButtonText: STRINGS.cancel\n            }).then(function(result) {\n                if (result.isConfirmed) {\n                    self.deleteReport(report.slug, source, reportName);\n                }\n            });\n        },\n\n        /**\n         * Delete a report.\n         * @param {string} slug - The report slug/identifier.\n         * @param {string} source - The report source ('assistant' or 'wizard').\n         * @param {string} reportName - The report name for display.\n         */\n        deleteReport: function(slug, source, reportName) {\n            var self = this;\n\n            Swal.fire({\n                title: STRINGS.deletingReport,\n                text: STRINGS.deletingReportWait,\n                allowOutsideClick: false,\n                allowEscapeKey: false,\n                didOpen: function() {\n                    Swal.showLoading();\n                }\n            });\n\n            var deletePromise = $.ajax({\n                url: M.cfg.wwwroot + '/report/adeptus_insights/ajax/manage_generated_reports.php',\n                method: 'POST',\n                dataType: 'json',\n                data: {\n                    action: 'remove_single',\n                    slug: slug,\n                    source: source,\n                    sesskey: M.cfg.sesskey\n                }\n            });\n\n            deletePromise.then(function(response) {\n                if (!response.success) {\n                    Swal.close();\n                    Swal.fire({\n                        icon: 'error',\n                        title: STRINGS.deleteFailed,\n                        text: response.message\n                    });\n                    return;\n                }\n\n                self.trackReportDeleted(reportName, source === 'assistant');\n\n                self.cachedReports = self.cachedReports.filter(function(r) {\n                    return r.slug !== slug;\n                });\n\n                if (self.currentReport && self.currentReport.slug === slug) {\n                    self.currentReport = null;\n                    self.currentReportData = null;\n                }\n\n                self.renderReportsList(self.cachedReports);\n                self.updateReportCount(self.cachedReports.length);\n\n                $('#report-content').addClass('d-none');\n                $('#report-placeholder').removeClass('d-none');\n                $('#report-category-selector').addClass('d-none');\n                $('.adeptus-report-view-title').text(STRINGS.selectAReport);\n\n                Swal.close();\n                self.showToast(STRINGS.reportDeletedSuccess, 'success');\n\n            }).catch(function(xhr) {\n                Swal.close();\n                var errorMsg = '';\n                try {\n                    var response = JSON.parse(xhr.responseText);\n                    errorMsg = response.message || '';\n                } catch (e) {\n                    if (xhr.responseJSON && xhr.responseJSON.message) {\n                        errorMsg = xhr.responseJSON.message;\n                    }\n                }\n                Swal.fire({\n                    icon: 'error',\n                    title: STRINGS.deleteFailed,\n                    text: errorMsg\n                });\n            });\n        },\n\n        /**\n         * Track report deletion to update quota.\n         * @param {string} reportName - The name of the deleted report.\n         * @param {boolean} isAiGenerated - Whether the report was AI-generated.\n         */\n        trackReportDeleted: function(reportName, isAiGenerated) {\n            $.ajax({\n                url: M.cfg.wwwroot + '/report/adeptus_insights/ajax/track_report_deleted.php',\n                method: 'POST',\n                dataType: 'json',\n                data: {\n                    report_name: reportName,\n                    is_ai_generated: isAiGenerated ? 1 : 0,\n                    sesskey: M.cfg.sesskey\n                }\n            }).done(function(response) {\n                window.console.log('[GeneratedReports] Report deletion tracked:', response);\n            }).fail(function(error) {\n                window.console.warn('[GeneratedReports] Failed to track report deletion:', error);\n            });\n        },\n\n        /**\n         * Show the category selector for the current report.\n         * @param {Object} report - The report to show category selector for.\n         */\n        showReportCategorySelector: function(report) {\n            var self = this;\n            var categoryInfo = report.category_info || {name: report.category || STRINGS.general, color: '#6c757d'};\n\n            this.currentCategoryReport = report;\n\n            $('#category-dot').css('background', categoryInfo.color || '#6c757d');\n            $('#category-name').text(categoryInfo.name || STRINGS.general);\n            $('#report-category-selector').removeClass('d-none');\n\n            var buildDropdown = function() {\n                var menuHtml = self.cachedCategories.map(function(cat) {\n                    var isSelected = (categoryInfo.id && cat.id === categoryInfo.id) ||\n                                     (!categoryInfo.id && cat.name.toLowerCase() ===\n                                     (categoryInfo.name || 'general').toLowerCase());\n                    return '<button type=\"button\" class=\"adeptus-category-menu-item' +\n                        (isSelected ? ' selected' : '') + '\" data-id=\"' + cat.id + '\" data-name=\"' + cat.name +\n                        '\" data-color=\"' + (cat.color || '#6c757d') + '\">' +\n                        '<span class=\"adeptus-category-menu-dot\" style=\"background: ' + (cat.color || '#6c757d') +\n                        ';\"></span>' +\n                        '<span class=\"adeptus-category-menu-name\">' + cat.name + '</span>' +\n                        (isSelected ? '<svg class=\"adeptus-category-menu-check\" width=\"16\" height=\"16\" ' +\n                        'viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\"><polyline ' +\n                        'points=\"20 6 9 17 4 12\"></polyline></svg>' : '') +\n                    '</button>';\n                }).join('');\n\n                $('#category-dropdown-menu').html(menuHtml);\n\n                $('.adeptus-category-menu-item').off('click').on('click', function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    var catId = $(this).data('id');\n                    var catName = $(this).data('name');\n                    var catColor = $(this).data('color');\n                    $('#category-dropdown-menu').removeClass('show');\n                    self.updateReportCategory(report.slug, catId, catName, catColor, report);\n                });\n            };\n\n            if (!this.cachedCategories || this.cachedCategories.length === 0) {\n                $.ajax({\n                    url: M.cfg.wwwroot + '/report/adeptus_insights/ajax/manage_category.php',\n                    method: 'POST',\n                    dataType: 'json',\n                    data: {\n                        action: 'list',\n                        sesskey: M.cfg.sesskey\n                    },\n                    success: function(response) {\n                        if (response.success && response.data) {\n                            self.cachedCategories = response.data;\n                        }\n                        buildDropdown();\n                    },\n                    error: function() {\n                        self.cachedCategories = [];\n                        buildDropdown();\n                    }\n                });\n            } else {\n                buildDropdown();\n            }\n\n            $('#category-current-btn').off('click').on('click', function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n                $('#category-dropdown-menu').toggleClass('show');\n            });\n\n            $('#category-dropdown-menu').off('click').on('click', function(e) {\n                e.stopPropagation();\n            });\n\n            $(document).off('click.categoryDropdown').on('click.categoryDropdown', function(e) {\n                if (!$(e.target).closest('.category-dropdown-wrapper').length) {\n                    $('#category-dropdown-menu').removeClass('show');\n                }\n            });\n        },\n\n        /**\n         * Update a report's category.\n         * @param {string} slug - The report slug.\n         * @param {number} categoryId - The new category ID.\n         * @param {string} categoryName - The new category name.\n         * @param {string} categoryColor - The new category color.\n         * @param {Object} report - The report object.\n         */\n        updateReportCategory: function(slug, categoryId, categoryName, categoryColor, report) {\n            var self = this;\n            var source = report ? (report.source || 'assistant') : 'assistant';\n\n            $('#category-dot').css('background', categoryColor);\n            $('#category-name').text(categoryName);\n\n            $.ajax({\n                url: M.cfg.wwwroot + '/report/adeptus_insights/ajax/update_report_category.php',\n                method: 'POST',\n                dataType: 'json',\n                data: {\n                    slug: slug,\n                    category_id: categoryId,\n                    source: source,\n                    sesskey: M.cfg.sesskey\n                },\n                success: function(response) {\n                    if (response.success) {\n                        var cacheIndex = self.cachedReports.findIndex(function(r) {\n                            return r.slug === slug;\n                        });\n                        if (cacheIndex !== -1) {\n                            self.cachedReports[cacheIndex].category = categoryName;\n                            self.cachedReports[cacheIndex].category_id = categoryId;\n                            self.cachedReports[cacheIndex].category_info = {\n                                id: categoryId,\n                                name: categoryName,\n                                color: categoryColor\n                            };\n                        }\n\n                        $('#category-current-btn').addClass('success-flash');\n                        setTimeout(function() {\n                            $('#category-current-btn').removeClass('success-flash');\n                        }, 600);\n                    } else {\n                        Swal.fire({\n                            icon: 'error',\n                            title: STRINGS.error,\n                            text: response.message\n                        });\n                    }\n                },\n                error: function(xhr) {\n                    var msg = (xhr.responseJSON && xhr.responseJSON.message) || '';\n                    Swal.fire({icon: 'error', title: STRINGS.error, text: msg});\n                }\n            });\n        },\n\n        /**\n         * Detect numeric columns in data.\n         * @param {Array} data - The data array.\n         * @param {Array} headers - The headers array.\n         * @returns {Array}\n         */\n        detectNumericColumns: function(data, headers) {\n            if (!data || data.length === 0) {\n                return [];\n            }\n\n            return headers.filter(function(header) {\n                var numericCount = 0;\n                var sampleSize = Math.min(data.length, 20);\n\n                for (var i = 0; i < sampleSize; i++) {\n                    var val = data[i][header];\n                    if (val !== null && val !== undefined && val !== '') {\n                        var num = parseFloat(val);\n                        if (!isNaN(num) && isFinite(num)) {\n                            numericCount++;\n                        }\n                    }\n                }\n\n                return numericCount >= sampleSize * 0.5;\n            });\n        },\n\n        /**\n         * Switch between table and chart views.\n         * @param {string} view - The view to switch to ('table' or 'chart').\n         */\n        switchView: function(view) {\n            this.currentView = view;\n            $('.adeptus-view-toggle-btn').removeClass('active');\n            $('.adeptus-view-toggle-btn[data-view=\"' + view + '\"]').addClass('active');\n\n            if (view === 'table') {\n                $('#report-table-view').removeClass('d-none');\n                $('#report-chart-view').addClass('d-none');\n            } else {\n                $('#report-table-view').addClass('d-none');\n                $('#report-chart-view').removeClass('d-none');\n                this.renderChart();\n            }\n        },\n\n        /**\n         * Get the authentication token.\n         * @returns {string|null}\n         */\n        getAuthToken: function() {\n            var authData = window.adeptusAuthData;\n            if (authData && authData.api_key) {\n                return authData.api_key;\n            }\n            return null;\n        },\n\n        /**\n         * Format a date for display.\n         * @param {string} dateStr - The date string to format.\n         * @returns {string}\n         */\n        formatDate: function(dateStr) {\n            if (!dateStr) {\n                return 'N/A';\n            }\n            var date = new Date(dateStr);\n            var now = new Date();\n            var diff = now - date;\n            var days = Math.floor(diff / (1000 * 60 * 60 * 24));\n\n            if (days === 0) {\n                return 'Today, ' + date.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});\n            } else if (days === 1) {\n                return 'Yesterday, ' + date.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});\n            } else if (days < 7) {\n                var weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n                return weekdays[date.getDay()] + ', ' + date.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});\n            } else {\n                return date.toLocaleDateString() + ', ' + date.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});\n            }\n        },\n\n        /**\n         * Load reports from server.\n         */\n        loadReports: function() {\n            var self = this;\n            var token = this.getAuthToken();\n\n            if (!token) {\n                if (self.retryCount < self.maxRetries) {\n                    self.retryCount++;\n                    setTimeout(function() {\n                        self.loadReports();\n                    }, 500);\n                    return;\n                } else {\n                    $('#reports-loader').addClass('d-none');\n                    $('#no-reports-message').removeClass('d-none').html(\n                        '<i class=\"fa fa-exclamation-triangle fa-3x text-warning mb-3\"></i>' +\n                        '<h5 class=\"text-muted\">Authentication Required</h5>' +\n                        '<p class=\"text-muted\">Please ensure you are logged in to view reports.</p>'\n                    );\n                    return;\n                }\n            }\n\n            var assistantPromise = $.ajax({\n                url: this.backendUrl + '/ai-reports',\n                method: 'GET',\n                headers: {\n                    'Authorization': 'Bearer ' + token,\n                    'Content-Type': 'application/json'\n                },\n                timeout: 15000\n            }).catch(function() {\n                return {reports: [], data: []};\n            });\n\n            var wizardPromise = new Promise(function(resolve) {\n                Ajax.call([{\n                    methodname: 'report_adeptus_insights_get_wizard_reports',\n                    args: {}\n                }])[0].done(function(result) {\n                    var response = (result && result.data) ? result.data : (result || {});\n                    resolve({success: true, reports: response.reports || []});\n                }).fail(function() {\n                    resolve({success: true, reports: []});\n                });\n            });\n\n            $.when(assistantPromise, wizardPromise).then(\n                function(assistantRes, wizardRes) {\n                    var aRes = assistantRes[0] || assistantRes || {};\n                    var wRes = wizardRes[0] || wizardRes || {};\n\n                    var assistantReports = aRes.reports || aRes.data || [];\n                    var wizardReports = wRes.reports || [];\n\n                    assistantReports = (Array.isArray(assistantReports) ? assistantReports : []).map(function(r) {\n                        r.source = r.source || 'assistant';\n                        return r;\n                    });\n                    wizardReports = (Array.isArray(wizardReports) ? wizardReports : []).map(function(r) {\n                        r.source = 'wizard';\n                        return r;\n                    });\n\n                    self.cachedReports = assistantReports.concat(wizardReports);\n\n                    self.cachedReports.sort(function(a, b) {\n                        return new Date(b.created_at) - new Date(a.created_at);\n                    });\n\n                    self.renderReportsList(self.cachedReports);\n                    self.updateReportCount(self.cachedReports.length);\n                },\n                function(xhr) {\n                    $('#reports-loader').addClass('d-none');\n                    if (xhr.status === 401) {\n                        $('#no-reports-message').removeClass('d-none').html(\n                            '<i class=\"fa fa-lock fa-3x text-warning mb-3\"></i>' +\n                            '<h5 class=\"text-muted\">' + STRINGS.sessionExpired + '</h5>' +\n                            '<p class=\"text-muted\">' + STRINGS.refreshPageToContinue + '</p>' +\n                            '<button class=\"btn btn-primary btn-sm\" onclick=\"location.reload()\">' +\n                            '<i class=\"fa fa-refresh\"></i> ' + STRINGS.refreshPage + '</button>'\n                        );\n                    } else {\n                        $('#no-reports-message').removeClass('d-none').html(\n                            '<i class=\"fa fa-exclamation-circle fa-3x text-danger mb-3\"></i>' +\n                            '<h5 class=\"text-muted\">' + STRINGS.failedToLoadReports + '</h5>' +\n                            '<p class=\"text-muted\">' + STRINGS.tryAgainLater + '</p>' +\n                            '<button class=\"btn btn-outline-primary btn-sm\" onclick=\"location.reload()\">' +\n                            '<i class=\"fa fa-refresh\"></i> ' + STRINGS.retry + '</button>'\n                        );\n                    }\n                }\n            );\n        },\n\n        /**\n         * Update the report count display.\n         * @param {number} count - The number of reports.\n         */\n        updateReportCount: function(count) {\n            var countText = count === 1 ? STRINGS.reportCount : count + ' ' + STRINGS.reportsCount;\n            $('.adeptus-page-header-subtitle').text(STRINGS.youHaveReportsSaved.replace('{count}',\n                countText.toLowerCase()));\n        },\n\n        /**\n         * Render the reports list.\n         * @param {Array} reports - The reports to render.\n         */\n        renderReportsList: function(reports) {\n            var self = this;\n\n            if (this.reportsDataTable) {\n                this.reportsDataTable.destroy();\n                this.reportsDataTable = null;\n            }\n\n            var tbody = $('#reports-tbody');\n            tbody.empty();\n\n            $('#reports-loader').addClass('d-none');\n\n            if (!reports || reports.length === 0) {\n                $('#no-reports-message').removeClass('d-none');\n                $('#reports-table-wrapper').addClass('d-none');\n                return;\n            }\n\n            $('#no-reports-message').addClass('d-none');\n            $('#reports-table-wrapper').removeClass('d-none');\n\n            reports.forEach(function(report) {\n                var date = self.formatDate(report.created_at);\n                var rowCount = report.row_count || report.data_count || '';\n                var rowCountBadge = rowCount ? '<span class=\"badge bg-info ms-1\" title=\"' + rowCount +\n                    ' rows\"><i class=\"fa fa-table\"></i> ' + rowCount + '</span>' : '';\n                var categoryBadge = report.category ? '<span class=\"badge bg-secondary ms-1\">' + report.category +\n                    '</span>' : '';\n\n                var source = (report.source || 'assistant').toLowerCase();\n                var sourceBadge = '';\n                if (source === 'wizard') {\n                    sourceBadge = '<span class=\"badge adeptus-badge-wizard\"><i class=\"fa fa-magic\"></i> ' +\n                        STRINGS.wizard + '</span>';\n                } else {\n                    sourceBadge = '<span class=\"badge adeptus-badge-ai\"><i class=\"fa fa-robot\"></i> ' +\n                        STRINGS.ai + '</span>';\n                }\n\n                var row = $('<tr class=\"adeptus-report-row\" data-report-slug=\"' + report.slug +\n                    '\" data-report-source=\"' + source + '\"></tr>');\n                row.html(\n                    '<td>' +\n                        '<div class=\"adeptus-report-name-cell\">' +\n                            '<span class=\"adeptus-report-name\">' +\n                            (report.description || report.name || STRINGS.untitledReport) + '</span>' +\n                            '<div class=\"adeptus-report-badges mt-1\">' + categoryBadge + rowCountBadge + '</div>' +\n                        '</div>' +\n                    '</td>' +\n                    '<td><small class=\"text-muted\">' + date + '</small></td>' +\n                    '<td>' + sourceBadge + '</td>'\n                );\n\n                tbody.append(row);\n            });\n\n            $('#reports-table-wrapper').off('click', '.adeptus-report-row').on('click', '.adeptus-report-row',\n                function() {\n                var $row = $(this);\n                var slug = $row.data('report-slug');\n\n                $('.adeptus-report-row').removeClass('table-primary');\n                $row.addClass('table-primary');\n                self.loadReportDetails(slug);\n            });\n\n            setTimeout(function() {\n                try {\n                    self.reportsDataTable = new window.simpleDatatables.DataTable(\"#reports-table\", {\n                        searchable: true,\n                        fixedHeight: false,\n                        perPage: 15,\n                        loading: false,\n                        labels: {\n                            placeholder: STRINGS.searchReports,\n                            noRows: STRINGS.noReportsFound,\n                            info: STRINGS.showingReports\n                        }\n                    });\n\n                    setTimeout(function() {\n                        $('.datatable-wrapper').removeClass('datatable-loading');\n                    }, 100);\n\n                    setTimeout(function() {\n                        var firstRow = $('.adeptus-report-row').first();\n                        if (firstRow.length && !self.currentReport) {\n                            firstRow.addClass('table-primary');\n                            var firstSlug = firstRow.data('report-slug');\n                            if (firstSlug) {\n                                self.loadReportDetails(firstSlug);\n                            }\n                        }\n                    }, 150);\n                } catch (e) {\n                    window.console.warn('DataTable initialization failed:', e);\n                }\n            }, 100);\n        },\n\n        /**\n         * Load report details.\n         * @param {string} slug - The report slug.\n         */\n        loadReportDetails: function(slug) {\n            var self = this;\n            var token = this.getAuthToken();\n\n            $('#report-placeholder').addClass('d-none');\n            $('#report-content').addClass('d-none');\n            $('#report-loading').removeClass('d-none');\n\n            var cachedReport = this.cachedReports.find(function(r) {\n                return r.slug === slug;\n            });\n            var source = cachedReport ? (cachedReport.source || 'assistant') : 'assistant';\n\n            if (cachedReport) {\n                $('.adeptus-report-view-title').text(cachedReport.description || cachedReport.name ||\n                    STRINGS.reportDetails);\n                self.showReportCategorySelector(cachedReport);\n            }\n\n            if (source === 'wizard' && cachedReport) {\n                self.loadWizardReport(cachedReport);\n                return;\n            }\n\n            $.ajax({\n                url: this.backendUrl + '/ai-reports/' + slug,\n                method: 'GET',\n                headers: {\n                    'Authorization': 'Bearer ' + token,\n                    'Content-Type': 'application/json'\n                },\n                timeout: 30000,\n                success: function(response) {\n                    var report = response.report || response;\n                    var data = response.data || [];\n\n                    report.source = source;\n\n                    var sqlQuery = response.sql || (report && report.sql_query) || (report && report.sql);\n                    var needsLocalExecution = response.execution_required || (!data || data.length === 0) && sqlQuery;\n\n                    if (needsLocalExecution && sqlQuery) {\n                        self.executeReportLocally(sqlQuery, report.params || {})\n                            .then(function(executionResult) {\n                                var localData = executionResult.data || [];\n\n                                self.currentReport = report;\n                                self.currentReportData = localData;\n\n                                var cacheIndex = self.cachedReports.findIndex(function(r) {\n                                    return r.slug === slug;\n                                });\n                                if (cacheIndex !== -1) {\n                                    self.cachedReports[cacheIndex] = Object.assign({}, report,\n                                        {data: localData, source: source});\n                                }\n\n                                self.renderReportContent(report, localData);\n                            })\n                            .catch(function(error) {\n                                $('#report-loading').addClass('d-none');\n                                $('#report-content').html(\n                                    '<div class=\"alert alert-danger\">' +\n                                        '<i class=\"fa fa-exclamation-circle\"></i> ' + STRINGS.failedToExecuteReport +\n                                        ': ' + error.message +\n                                        '<button class=\"btn btn-sm btn-outline-danger ms-3\" ' +\n                                        'onclick=\"GeneratedReports.loadReportDetails(\\'' + slug + '\\')\">' +\n                                        '<i class=\"fa fa-refresh\"></i> ' + STRINGS.retry + '</button>' +\n                                    '</div>'\n                                ).removeClass('d-none');\n                            });\n                        return;\n                    }\n\n                    self.currentReport = report;\n                    self.currentReportData = data;\n\n                    var cacheIndex = self.cachedReports.findIndex(function(r) {\n                        return r.slug === slug;\n                    });\n                    if (cacheIndex !== -1) {\n                        self.cachedReports[cacheIndex] = Object.assign({}, report, {data: data, source: source});\n                    }\n\n                    self.renderReportContent(report, data);\n                },\n                error: function() {\n                    $('#report-loading').addClass('d-none');\n                    $('#report-content').html(\n                        '<div class=\"alert alert-danger\">' +\n                            '<i class=\"fa fa-exclamation-circle\"></i> ' + STRINGS.failedToLoadReportDetails +\n                            '<button class=\"btn btn-sm btn-outline-danger ms-3\" ' +\n                            'onclick=\"GeneratedReports.loadReportDetails(\\'' + slug + '\\')\">' +\n                            '<i class=\"fa fa-refresh\"></i> ' + STRINGS.retry + '</button>' +\n                        '</div>'\n                    ).removeClass('d-none');\n                }\n            });\n        },\n\n        /**\n         * Load and execute a wizard report.\n         * @param {Object} cachedReport - The cached report object.\n         */\n        loadWizardReport: function(cachedReport) {\n            var self = this;\n\n            var parameters = cachedReport.parameters || {};\n            var reportTemplateId = cachedReport.report_template_id || cachedReport.name;\n\n            $.ajax({\n                url: M.cfg.wwwroot + '/lib/ajax/service.php?sesskey=' + M.cfg.sesskey +\n                    '&info=report_adeptus_insights_generate_report',\n                method: 'POST',\n                contentType: 'application/json',\n                data: JSON.stringify([{\n                    index: 0,\n                    methodname: 'report_adeptus_insights_generate_report',\n                    args: {\n                        reportid: reportTemplateId,\n                        parameters: JSON.stringify(parameters),\n                        reexecution: true\n                    }\n                }]),\n                timeout: 60000,\n                success: function(results) {\n                    var result = Array.isArray(results) && results.length > 0 ? results[0] : null;\n\n                    if (result && result.error) {\n                        $('#report-loading').addClass('d-none');\n                        $('#report-content').html(\n                            '<div class=\"alert alert-danger\">' +\n                                '<i class=\"fa fa-exclamation-circle\"></i> ' +\n                                ((result.exception && result.exception.message) || result.error) +\n                                '<button class=\"btn btn-sm btn-outline-danger ms-3\" ' +\n                                'onclick=\"GeneratedReports.loadReportDetails(\\'' + cachedReport.slug + '\\')\">' +\n                                '<i class=\"fa fa-refresh\"></i> ' + STRINGS.retry + '</button>' +\n                            '</div>'\n                        ).removeClass('d-none');\n                        return;\n                    }\n\n                    var response = (result && result.data) ? result.data : (result || {});\n                    if (response.success) {\n                        var rawResults = response.results || response.data || [];\n                        var data = rawResults.map(function(row) {\n                            if (row.cells && Array.isArray(row.cells)) {\n                                var flatRow = {};\n                                row.cells.forEach(function(cell) {\n                                    flatRow[cell.key] = cell.value;\n                                });\n                                return flatRow;\n                            }\n                            return row;\n                        });\n                        var report = {\n                            name: cachedReport.name,\n                            description: cachedReport.description || cachedReport.name,\n                            category: (response.report && response.report.category) || cachedReport.category || 'Wizard Report',\n                            created_at: cachedReport.created_at,\n                            source: 'wizard',\n                            slug: cachedReport.slug\n                        };\n\n                        self.currentReport = report;\n                        self.currentReportData = data;\n\n                        var cacheIndex = self.cachedReports.findIndex(function(r) {\n                            return r.slug === cachedReport.slug;\n                        });\n                        if (cacheIndex !== -1) {\n                            self.cachedReports[cacheIndex].data = data;\n                            self.cachedReports[cacheIndex].row_count = data.length;\n                        }\n\n                        self.renderReportContent(report, data);\n                    } else {\n                        $('#report-loading').addClass('d-none');\n                        $('#report-content').html(\n                            '<div class=\"alert alert-warning\">' +\n                                '<i class=\"fa fa-exclamation-triangle\"></i> ' +\n                                (response.message || STRINGS.failedToGenerateReport) +\n                                '<button class=\"btn btn-sm btn-outline-warning ms-3\" ' +\n                                'onclick=\"GeneratedReports.loadReportDetails(\\'' + cachedReport.slug + '\\')\">' +\n                                '<i class=\"fa fa-refresh\"></i> ' + STRINGS.retry + '</button>' +\n                            '</div>'\n                        ).removeClass('d-none');\n                    }\n                },\n                error: function() {\n                    $('#report-loading').addClass('d-none');\n                    $('#report-content').html(\n                        '<div class=\"alert alert-danger\">' +\n                            '<i class=\"fa fa-exclamation-circle\"></i> ' + STRINGS.failedToExecuteWizardReport +\n                            '<button class=\"btn btn-sm btn-outline-danger ms-3\" ' +\n                            'onclick=\"GeneratedReports.loadReportDetails(\\'' + cachedReport.slug + '\\')\">' +\n                            '<i class=\"fa fa-refresh\"></i> ' + STRINGS.retry + '</button>' +\n                        '</div>'\n                    ).removeClass('d-none');\n                }\n            });\n        },\n\n        /**\n         * Execute SQL locally for SaaS model.\n         * @param {string} sql - The SQL query to execute.\n         * @param {Object} params - Query parameters.\n         * @returns {Promise}\n         */\n        executeReportLocally: function(sql, params) {\n            params = params || {};\n\n            return new Promise(function(resolve, reject) {\n                $.ajax({\n                    url: M.cfg.wwwroot + '/report/adeptus_insights/ajax/execute_ai_report.php',\n                    method: 'POST',\n                    contentType: 'application/json',\n                    data: JSON.stringify({\n                        sql: sql,\n                        params: params,\n                        sesskey: M.cfg.sesskey\n                    }),\n                    timeout: 60000,\n                    success: function(response) {\n                        if (response.success) {\n                            resolve({\n                                data: response.data || [],\n                                headers: response.headers || [],\n                                row_count: response.row_count || 0,\n                                error: null\n                            });\n                        } else {\n                            resolve({\n                                data: [],\n                                headers: [],\n                                row_count: 0,\n                                error: response.message || 'Query execution failed'\n                            });\n                        }\n                    },\n                    error: function(xhr, status, error) {\n                        var errorMessage = 'Failed to execute report';\n                        try {\n                            var response = JSON.parse(xhr.responseText);\n                            errorMessage = response.message || errorMessage;\n                        } catch (e) {\n                            errorMessage = error || errorMessage;\n                        }\n                        reject(new Error(errorMessage));\n                    }\n                });\n            });\n        },\n\n        /**\n         * Render report content.\n         * @param {Object} report - The report object.\n         * @param {Array} data - The report data.\n         */\n        renderReportContent: function(report, data) {\n            var self = this;\n            $('#report-loading').addClass('d-none');\n\n            var contentHtml = '';\n            var rowCount = data ? data.length : 0;\n\n            contentHtml += '<div class=\"adeptus-report-detail-header mb-4\">';\n            contentHtml += '<h4 class=\"mb-2\">' + (report.description || report.name || STRINGS.report) + '</h4>';\n            contentHtml += '<div class=\"adeptus-report-meta d-flex flex-wrap align-items-center gap-2\">';\n\n            var reportSource = (report.source || 'assistant').toLowerCase();\n            if (reportSource === 'wizard') {\n                contentHtml += '<span class=\"badge adeptus-badge-wizard\"><i class=\"fa fa-magic\"></i> ' +\n                    STRINGS.wizard + '</span>';\n            } else {\n                contentHtml += '<span class=\"badge adeptus-badge-ai\"><i class=\"fa fa-robot\"></i> ' +\n                    STRINGS.ai + '</span>';\n            }\n\n            contentHtml += '<span class=\"badge adeptus-badge-rowcount\"><i class=\"fa fa-table\"></i> ' + rowCount +\n                ' ' + STRINGS.rows + '</span>';\n            contentHtml += '</div>';\n            contentHtml += '</div>';\n\n            contentHtml += '<div class=\"adeptus-action-bar d-flex justify-content-between align-items-center mb-3\">';\n\n            contentHtml += '<div class=\"adeptus-view-toggle btn-group\" role=\"group\">';\n            contentHtml += '<button type=\"button\" class=\"btn btn-sm adeptus-view-toggle-btn active\" ' +\n                'data-view=\"table\"><i class=\"fa fa-table\"></i> ' + STRINGS.table + '</button>';\n            contentHtml += '<button type=\"button\" class=\"btn btn-sm adeptus-view-toggle-btn\" data-view=\"chart\">' +\n                '<i class=\"fa fa-bar-chart\"></i> ' + STRINGS.chart + '</button>';\n            contentHtml += '</div>';\n\n            var premiumClass = self.isFreePlan ? ' adeptus-export-premium' : '';\n            contentHtml += '<div class=\"adeptus-export-buttons d-flex gap-2\">';\n            contentHtml += '<button class=\"btn btn-outline-danger btn-sm adeptus-export-pdf-btn\">' +\n                '<i class=\"fa fa-file-pdf-o\"></i> ' + STRINGS.exportPdf + '</button>';\n            contentHtml += '<button class=\"btn btn-outline-primary btn-sm adeptus-export-csv-btn' + premiumClass +\n                '\"><i class=\"fa fa-file-excel-o\"></i> ' + STRINGS.exportCsv +\n                (self.isFreePlan ? ' <i class=\"fa fa-crown text-warning\" style=\"font-size: 10px;\"></i>' : '') +\n                '</button>';\n            contentHtml += '<button class=\"btn btn-outline-secondary btn-sm adeptus-export-json-btn' + premiumClass +\n                '\"><i class=\"fa fa-code\"></i> ' + STRINGS.exportJson +\n                (self.isFreePlan ? ' <i class=\"fa fa-crown text-warning\" style=\"font-size: 10px;\"></i>' : '') +\n                '</button>';\n            contentHtml += '</div>';\n            contentHtml += '</div>';\n\n            if (data && data.length > 0) {\n                var headers = Object.keys(data[0]);\n                var displayLimit = 100;\n\n                contentHtml += '<div id=\"report-table-view\" class=\"adeptus-report-view\">';\n                contentHtml += '<div class=\"adeptus-report-data-wrapper\">';\n                contentHtml += '<div class=\"table-responsive report-table-container\">';\n                contentHtml += '<table class=\"table table-striped table-hover table-sm report-data-table\">';\n                contentHtml += '<thead class=\"table-light sticky-header\"><tr>';\n                headers.forEach(function(header) {\n                    var formattedHeader = header.replace(/_/g, ' ').replace(/\\b\\w/g, function(l) {\n                        return l.toUpperCase();\n                    });\n                    contentHtml += '<th>' + formattedHeader + '</th>';\n                });\n                contentHtml += '</tr></thead>';\n                contentHtml += '<tbody>';\n\n                var displayData = data.slice(0, displayLimit);\n                displayData.forEach(function(row) {\n                    contentHtml += '<tr>';\n                    headers.forEach(function(header) {\n                        var value = row[header];\n                        if (value === null || value === undefined) {\n                            value = '';\n                        }\n                        var displayValue = String(value);\n                        if (displayValue.length > 100) {\n                            displayValue = displayValue.substring(0, 100) + '...';\n                        }\n                        contentHtml += '<td title=\"' + String(value).replace(/\"/g, '&quot;') + '\">' +\n                            displayValue + '</td>';\n                    });\n                    contentHtml += '</tr>';\n                });\n\n                contentHtml += '</tbody></table>';\n                contentHtml += '</div>';\n                contentHtml += '</div>';\n\n                if (data.length > displayLimit) {\n                    contentHtml += '<div class=\"alert alert-info mt-3 d-flex align-items-center ' +\n                        'justify-content-between\">';\n                    contentHtml += '<span><i class=\"fa fa-info-circle\"></i> ' +\n                        STRINGS.showingFirstRows.replace('{first}', displayLimit).replace('{total}', data.length) +\n                        '</span>';\n                    contentHtml += '<span class=\"text-primary\">' + STRINGS.exportToSeeAll + '</span>';\n                    contentHtml += '</div>';\n                }\n                contentHtml += '</div>';\n\n                contentHtml += '<div id=\"report-chart-view\" class=\"adeptus-report-view d-none\">';\n                contentHtml += '<div class=\"adeptus-chart-controls-wrapper mb-3\">';\n                contentHtml += '<div class=\"adeptus-chart-controls d-flex flex-wrap align-items-center gap-3\">';\n\n                contentHtml += '<div class=\"adeptus-control-group\">';\n                contentHtml += '<label for=\"chart-type-select\" class=\"form-label\">' + STRINGS.chartType + '</label>';\n                contentHtml += '<select id=\"chart-type-select\" class=\"form-select form-select-sm\">';\n                contentHtml += '<option value=\"bar\">' + STRINGS.barChart + '</option>';\n                contentHtml += '<option value=\"line\">' + STRINGS.lineChart + '</option>';\n                contentHtml += '<option value=\"pie\">' + STRINGS.pieChart + '</option>';\n                contentHtml += '<option value=\"doughnut\">' + STRINGS.doughnutChart + '</option>';\n                contentHtml += '</select>';\n                contentHtml += '</div>';\n\n                contentHtml += '<div class=\"adeptus-control-group\">';\n                contentHtml += '<label for=\"chart-x-axis\" class=\"form-label\">' + STRINGS.xAxisLabels + '</label>';\n                contentHtml += '<select id=\"chart-x-axis\" class=\"form-select form-select-sm\">';\n                headers.forEach(function(header, idx) {\n                    var formattedHeader = header.replace(/_/g, ' ').replace(/\\b\\w/g, function(l) {\n                        return l.toUpperCase();\n                    });\n                    var selected = idx === 0 ? ' selected' : '';\n                    contentHtml += '<option value=\"' + header + '\"' + selected + '>' + formattedHeader + '</option>';\n                });\n                contentHtml += '</select>';\n                contentHtml += '</div>';\n\n                var numericCols = self.detectNumericColumns(data, headers);\n                contentHtml += '<div class=\"adeptus-control-group\">';\n                contentHtml += '<label for=\"chart-y-axis\" class=\"form-label\">' + STRINGS.yAxisValues + '</label>';\n                contentHtml += '<select id=\"chart-y-axis\" class=\"form-select form-select-sm\">';\n                if (numericCols.length > 0) {\n                    numericCols.forEach(function(col, idx) {\n                        var formattedHeader = col.replace(/_/g, ' ').replace(/\\b\\w/g, function(l) {\n                            return l.toUpperCase();\n                        });\n                        var selected = idx === numericCols.length - 1 ? ' selected' : '';\n                        contentHtml += '<option value=\"' + col + '\"' + selected + '>' + formattedHeader + '</option>';\n                    });\n                } else {\n                    headers.forEach(function(header, idx) {\n                        var formattedHeader = header.replace(/_/g, ' ').replace(/\\b\\w/g, function(l) {\n                            return l.toUpperCase();\n                        });\n                        var selected = idx === headers.length - 1 ? ' selected' : '';\n                        contentHtml += '<option value=\"' + header + '\"' + selected + '>' + formattedHeader + '</option>';\n                    });\n                }\n                contentHtml += '</select>';\n                contentHtml += '</div>';\n\n                contentHtml += '</div>';\n                contentHtml += '</div>';\n\n                contentHtml += '<div class=\"adeptus-chart-container\" style=\"position: relative; height: 400px;\">';\n                contentHtml += '<canvas id=\"report-chart\"></canvas>';\n                contentHtml += '</div>';\n                contentHtml += '</div>';\n\n            } else {\n                contentHtml += '<div class=\"alert alert-warning text-center py-4\">';\n                contentHtml += '<i class=\"fa fa-inbox fa-2x mb-2 d-block\"></i>';\n                contentHtml += '<strong>' + STRINGS.noDataAvailable + '</strong><br>';\n                contentHtml += '<small class=\"text-muted\">' + STRINGS.noDataRows + '</small>';\n                contentHtml += '</div>';\n            }\n\n            $('#report-content').html(contentHtml).removeClass('d-none');\n\n            self.currentView = 'table';\n\n            $('#report-content .adeptus-export-pdf-btn').on('click', function() {\n                self.exportReport(report.slug, 'pdf');\n            });\n            $('#report-content .adeptus-export-csv-btn').on('click', function() {\n                if ($(this).hasClass('adeptus-export-premium')) {\n                    self.showExportUpgradePrompt('csv');\n                    return;\n                }\n                self.exportReport(report.slug, 'csv');\n            });\n            $('#report-content .adeptus-export-json-btn').on('click', function() {\n                if ($(this).hasClass('adeptus-export-premium')) {\n                    self.showExportUpgradePrompt('json');\n                    return;\n                }\n                self.exportReport(report.slug, 'json');\n            });\n\n            $('#delete-report-header-btn').off('click').on('click', function() {\n                self.confirmDeleteReport(report);\n            });\n        },\n\n        /**\n         * Render chart.\n         */\n        renderChart: function() {\n            var self = this;\n            var data = this.currentReportData;\n\n            if (!data || data.length === 0) {\n                return;\n            }\n\n            var chartType = $('#chart-type-select').val() || 'bar';\n            var canvas = document.getElementById('report-chart');\n            if (!canvas) {\n                return;\n            }\n\n            if (this.chartInstance) {\n                this.chartInstance.destroy();\n                this.chartInstance = null;\n            }\n\n            var labelKey = $('#chart-x-axis').val();\n            var valueKey = $('#chart-y-axis').val();\n\n            if (!labelKey || !valueKey) {\n                var headers = Object.keys(data[0]);\n                labelKey = labelKey || headers[0];\n                valueKey = valueKey || headers[headers.length - 1];\n            }\n\n            var valueKeyFormatted = valueKey.replace(/_/g, ' ').replace(/\\b\\w/g, function(l) {\n                return l.toUpperCase();\n            });\n\n            var chartData = data.slice(0, 50);\n            var labels = chartData.map(function(r) {\n                var label = r[labelKey];\n                if (label === null || label === undefined) {\n                    return STRINGS.unknown;\n                }\n                var labelStr = String(label);\n                return labelStr.length > 30 ? labelStr.substring(0, 30) + '...' : labelStr;\n            });\n            var values = chartData.map(function(r) {\n                return parseFloat(r[valueKey]) || 0;\n            });\n\n            var colors = this.generateChartColors(values.length, chartType);\n            var chartConfig = this.createChartConfig(chartType, labels, values, valueKeyFormatted, colors);\n\n            try {\n                this.chartInstance = new this.Chart(canvas.getContext('2d'), chartConfig);\n            } catch (error) {\n                window.console.error('Error creating chart:', error);\n                $('#report-chart-view .adeptus-chart-container').html(\n                    '<div class=\"alert alert-danger\"><i class=\"fa fa-exclamation-triangle\"></i> ' +\n                    STRINGS.errorRenderingChart + ': ' + error.message + '</div>'\n                );\n            }\n        },\n\n        /**\n         * Generate chart colors.\n         * @param {number} count - Number of colors needed.\n         * @param {string} chartType - The chart type.\n         * @returns {Array}\n         */\n        generateChartColors: function(count) {\n            var baseColors = [\n                '#2563eb', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6',\n                '#06b6d4', '#ec4899', '#84cc16', '#f97316', '#6366f1',\n                '#14b8a6', '#a855f7', '#eab308', '#22c55e', '#3b82f6'\n            ];\n\n            var colors = [];\n            for (var i = 0; i < count; i++) {\n                colors.push(baseColors[i % baseColors.length]);\n            }\n            return colors;\n        },\n\n        /**\n         * Create chart configuration.\n         * @param {string} chartType - The chart type.\n         * @param {Array} labels - The labels array.\n         * @param {Array} values - The values array.\n         * @param {string} valueKey - The value key label.\n         * @param {Array} colors - The colors array.\n         * @returns {Object}\n         */\n        createChartConfig: function(chartType, labels, values, valueKey, colors) {\n            var reportName = (this.currentReport && this.currentReport.description) || (this.currentReport && this.currentReport.name) || STRINGS.report;\n\n            var baseConfig = {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    title: {\n                        display: true,\n                        text: reportName,\n                        font: {size: 16, weight: 'bold'},\n                        padding: {top: 10, bottom: 20}\n                    },\n                    legend: {\n                        display: chartType === 'pie' || chartType === 'doughnut',\n                        position: 'right'\n                    }\n                }\n            };\n\n            if (chartType === 'pie' || chartType === 'doughnut') {\n                return {\n                    type: chartType,\n                    data: {\n                        labels: labels,\n                        datasets: [{\n                            data: values,\n                            backgroundColor: colors,\n                            borderColor: '#fff',\n                            borderWidth: 2\n                        }]\n                    },\n                    options: baseConfig\n                };\n            } else if (chartType === 'line') {\n                return {\n                    type: 'line',\n                    data: {\n                        labels: labels,\n                        datasets: [{\n                            label: valueKey,\n                            data: values,\n                            borderColor: colors[0],\n                            backgroundColor: colors[0] + '40',\n                            borderWidth: 3,\n                            fill: true,\n                            tension: 0.4\n                        }]\n                    },\n                    options: Object.assign({}, baseConfig, {\n                        scales: {\n                            y: {beginAtZero: true},\n                            x: {ticks: {maxRotation: 45, minRotation: 45}}\n                        }\n                    })\n                };\n            } else {\n                return {\n                    type: 'bar',\n                    data: {\n                        labels: labels,\n                        datasets: [{\n                            label: valueKey,\n                            data: values,\n                            backgroundColor: colors,\n                            borderColor: colors.map(function(c) {\n                                return c;\n                            }),\n                            borderWidth: 1\n                        }]\n                    },\n                    options: Object.assign({}, baseConfig, {\n                        scales: {\n                            y: {beginAtZero: true},\n                            x: {ticks: {maxRotation: 45, minRotation: 45}}\n                        }\n                    })\n                };\n            }\n        },\n\n        /**\n         * Export report.\n         * @param {string} reportSlug - The report slug.\n         * @param {string} format - The export format.\n         */\n        exportReport: function(reportSlug, format) {\n            var self = this;\n\n            if (!self.currentReportData || !Array.isArray(self.currentReportData) ||\n                self.currentReportData.length === 0) {\n                Swal.fire({\n                    icon: 'warning',\n                    title: STRINGS.noData,\n                    text: STRINGS.noDataToExport\n                });\n                return;\n            }\n\n            Swal.fire({\n                title: STRINGS.exportingAs.replace('{format}', format.toUpperCase()),\n                allowOutsideClick: false,\n                didOpen: function() {\n                    Swal.showLoading();\n                }\n            });\n\n            self.checkExportEligibility(format).then(function(eligibility) {\n                if (!eligibility.success || !eligibility.eligible) {\n                    Swal.close();\n                    if (self.isFreePlan && format !== 'pdf') {\n                        self.showExportUpgradePrompt(format);\n                    } else {\n                        Swal.fire({\n                            icon: 'error',\n                            title: STRINGS.exportNotAvailable,\n                            text: eligibility.message || STRINGS.exportNotEligible\n                        });\n                    }\n                    return;\n                }\n\n                var reportId = reportSlug;\n                var isWizardReport = self.currentReport && self.currentReport.source === 'wizard';\n                if (isWizardReport && self.currentReport.name) {\n                    reportId = self.currentReport.name;\n                }\n\n                var body = 'reportid=' + encodeURIComponent(reportId) + '&format=' + format +\n                    '&sesskey=' + M.cfg.sesskey;\n                body += '&view=' + self.currentView;\n\n                var headers = self.currentReportData.length > 0 ? Object.keys(self.currentReportData[0]) : [];\n                var reportDataPayload = {\n                    results: self.currentReportData,\n                    headers: headers,\n                    report_name: (self.currentReport && self.currentReport.description) || (self.currentReport && self.currentReport.name) || 'report',\n                    report_category: (self.currentReport && self.currentReport.category) || ''\n                };\n                body += '&report_data=' + encodeURIComponent(JSON.stringify(reportDataPayload));\n\n                var chartImagePromise = Promise.resolve(null);\n                if (format === 'pdf' && self.currentView === 'chart') {\n                    chartImagePromise = self.captureChartImage().catch(function() {\n                        return null;\n                    });\n                }\n\n                chartImagePromise.then(function(chartImage) {\n                    if (chartImage && chartImage.length > 100) {\n                        body += '&chart_image=' + encodeURIComponent(chartImage);\n                        window.console.log('[GeneratedReports] Chart image included in export');\n                    }\n\n                    return fetch(M.cfg.wwwroot + '/report/adeptus_insights/ajax/export_report.php', {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/x-www-form-urlencoded',\n                        },\n                        body: body,\n                        credentials: 'same-origin'\n                    });\n                }).then(function(response) {\n                    var contentType = response.headers.get('content-type');\n                    var contentDisposition = response.headers.get('content-disposition');\n\n                    if (contentType && contentType.includes('application/json') && !contentDisposition) {\n                        return response.json().then(function(errorData) {\n                            throw new Error(errorData.message || 'Export failed');\n                        });\n                    }\n\n                    if (!response.ok) {\n                        throw new Error('Export failed with status: ' + response.status);\n                    }\n\n                    return response.blob();\n                }).then(function(blob) {\n                    var reportName = (self.currentReport && self.currentReport.description) || (self.currentReport && self.currentReport.name) || 'report';\n                    var sanitizedName = reportName.replace(/[^a-zA-Z0-9\\s-]/g, '').replace(/\\s+/g, '_').toLowerCase();\n                    var dateSuffix = new Date().toISOString().split('T')[0];\n\n                    var url = window.URL.createObjectURL(blob);\n                    var link = document.createElement('a');\n                    link.href = url;\n                    link.download = sanitizedName + '_' + dateSuffix + '.' + format;\n                    document.body.appendChild(link);\n                    link.click();\n                    window.URL.revokeObjectURL(url);\n                    document.body.removeChild(link);\n\n                    Swal.close();\n\n                    self.trackExport(format, reportName);\n                    self.showToast(format.toUpperCase() + ' ' + STRINGS.fileDownloadedSuccess, 'success');\n\n                }).catch(function(error) {\n                    Swal.close();\n                    Swal.fire({\n                        icon: 'error',\n                        title: STRINGS.exportFailed,\n                        text: error.message || STRINGS.exportFailedMessage\n                    });\n                });\n            });\n        }\n    };\n\n    // Make available globally for retry buttons\n    window.GeneratedReports = GeneratedReports;\n\n    return {\n        /**\n         * Initialize the module.\n         * @param {Object} config - Configuration from PHP.\n         */\n        init: function(config) {\n            // Load strings first, then initialize\n            loadStrings().then(function() {\n                // Wait for auth data to be available\n                var checkAuth = setInterval(function() {\n                    if (window.adeptusAuthData) {\n                        clearInterval(checkAuth);\n                        GeneratedReports.init(config);\n                    }\n                }, 100);\n\n                // Timeout after 5 seconds\n                setTimeout(function() {\n                    clearInterval(checkAuth);\n                    if (!window.adeptusAuthData) {\n                        $('#reports-loader').addClass('d-none');\n                        $('#no-reports-message').removeClass('d-none').html(\n                            '<i class=\"fa fa-exclamation-triangle fa-3x text-warning mb-3\"></i>' +\n                            '<h5 class=\"text-muted\">' + STRINGS.authenticationRequired + '</h5>' +\n                            '<p class=\"text-muted\">' + STRINGS.authenticationRequiredMessage + '</p>'\n                        );\n                    }\n                }, 5000);\n            });\n        }\n    };\n});\n"],"names":["define","$","Ajax","Str","Chart","STRINGS","GeneratedReports","backendUrl","cachedReports","cachedCategories","currentReport","currentReportData","reportsDataTable","retryCount","maxRetries","currentView","chartInstance","strings","isFreePlan","init","config","this","loadReports","loadCategories","bindViewToggle","bindCategoryManagement","showExportUpgradePrompt","format","subscriptionUrl","M","cfg","wwwroot","formatName","toUpperCase","Swal","fire","title","premiumExportFormat","html","premiumFeature","exportUpgradeMessage","replace","freePlan","freePlanPdfOnly","paidPlans","paidPlansAllFormats","showCancelButton","confirmButtonText","upgradeNow","cancelButtonText","cancel","confirmButtonColor","cancelButtonColor","width","then","result","isConfirmed","window","open","checkExportEligibility","Promise","resolve","call","methodname","args","done","data","fail","error","console","success","eligible","message","captureChartImage","self","setTimeout","chartCanvas","document","getElementById","warn","dataUrl","toDataURL","length","log","e","loadHtml2Canvas","html2canvas","backgroundColor","scale","useCORS","allowTaint","logging","capturedCanvas","catch","reject","script","createElement","src","onload","onerror","Error","head","appendChild","showToast","type","toastContainer","id","style","cssText","body","toast","innerHTML","animation","parentNode","removeChild","trackExport","reportName","fetch","method","headers","encodeURIComponent","sesskey","response","json","on","view","switchView","renderChart","showCategoryManagementModal","ajax","url","dataType","action","systemCategories","filter","c","is_system","customCategories","customCategoriesHtml","map","cat","color","name","report_count","join","noCustomCategories","createFirstCategory","systemCategoriesHtml","colorSwatchesHtml","categories","createNewCategory","categoryName","customColor","yourCategories","defaultCategories","readOnly","showConfirmButton","showCloseButton","customClass","popup","closeButton","htmlContainer","didOpen","selectedColor","preventDefault","stopPropagation","toggleClass","target","closest","removeClass","css","val","trim","createCategory","addClass","focus","which","click","catId","find","off","showEditCategoryDialog","confirmDeleteCategory","willClose","push","close","icon","categoryCreated","timer","showValidationMessage","xhr","msg","responseJSON","text","category","toLowerCase","editCategory","custom","saveChanges","confirmButton","cancelButton","preConfirm","value","pleaseEnterCategoryName","updateCategory","categoryId","category_id","idx","findIndex","categoryUpdated","deleteCategoryConfirm","deleteCategoryWarning","yesDelete","deleteCategory","categoryDeleted","confirmDeleteReport","report","slug","description","untitledReport","source","wizard","ai","deleteReportConfirm","deleteReportWarning","deleteReport","noReportSelected","selectAReport","deletingReport","deletingReportWait","allowOutsideClick","allowEscapeKey","showLoading","deleteFailed","trackReportDeleted","r","renderReportsList","updateReportCount","reportDeletedSuccess","errorMsg","JSON","parse","responseText","isAiGenerated","report_name","is_ai_generated","showReportCategorySelector","categoryInfo","category_info","general","currentCategoryReport","buildDropdown","menuHtml","isSelected","catName","catColor","updateReportCategory","categoryColor","cacheIndex","detectNumericColumns","header","numericCount","sampleSize","Math","min","i","num","parseFloat","isNaN","isFinite","getAuthToken","authData","adeptusAuthData","api_key","formatDate","dateStr","date","Date","diff","days","floor","toLocaleTimeString","hour","minute","getDay","toLocaleDateString","token","assistantPromise","timeout","reports","wizardPromise","when","assistantRes","wizardRes","aRes","wRes","assistantReports","wizardReports","Array","isArray","concat","sort","a","b","created_at","status","sessionExpired","refreshPageToContinue","refreshPage","failedToLoadReports","tryAgainLater","retry","count","countText","reportCount","reportsCount","youHaveReportsSaved","destroy","tbody","empty","forEach","rowCount","row_count","data_count","rowCountBadge","categoryBadge","sourceBadge","row","append","$row","loadReportDetails","simpleDatatables","DataTable","searchable","fixedHeight","perPage","loading","labels","placeholder","searchReports","noRows","noReportsFound","info","showingReports","firstRow","first","firstSlug","cachedReport","reportDetails","loadWizardReport","sqlQuery","sql","sql_query","execution_required","executeReportLocally","params","executionResult","localData","Object","assign","renderReportContent","failedToExecuteReport","failedToLoadReportDetails","parameters","reportTemplateId","report_template_id","contentType","stringify","index","reportid","reexecution","results","exception","cells","flatRow","cell","key","failedToGenerateReport","failedToExecuteWizardReport","errorMessage","contentHtml","reportSource","rows","table","chart","premiumClass","exportPdf","exportCsv","exportJson","keys","formattedHeader","l","slice","displayValue","String","substring","showingFirstRows","exportToSeeAll","chartType","barChart","lineChart","pieChart","doughnutChart","xAxisLabels","numericCols","yAxisValues","col","selected","noDataAvailable","noDataRows","exportReport","hasClass","canvas","labelKey","valueKey","valueKeyFormatted","chartData","label","unknown","labelStr","values","colors","generateChartColors","chartConfig","createChartConfig","getContext","errorRenderingChart","baseColors","baseConfig","responsive","maintainAspectRatio","plugins","display","font","size","weight","padding","top","bottom","legend","position","datasets","borderColor","borderWidth","options","fill","tension","scales","y","beginAtZero","x","ticks","maxRotation","minRotation","reportSlug","exportingAs","eligibility","exportNotAvailable","exportNotEligible","reportId","reportDataPayload","report_category","chartImagePromise","chartImage","credentials","get","contentDisposition","includes","errorData","ok","blob","sanitizedName","dateSuffix","toISOString","split","URL","createObjectURL","link","href","download","revokeObjectURL","fileDownloadedSuccess","exportFailed","exportFailedMessage","noData","noDataToExport","get_strings","component","authenticationRequired","authenticationRequiredMessage","checkAuth","setInterval","clearInterval"],"mappings":"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"}