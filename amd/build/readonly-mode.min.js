define("report_adeptus_insights/readonly-mode",["jquery","core/notification"],(function($,Notification){var ReadonlyMode={init:function(){$(document).on("adeptus:enableReadOnly",(function(){ReadonlyMode.enable()})),$(document).on("adeptus:disableReadOnly",(function(){ReadonlyMode.disable()})),window.adeptusAuthData&&ReadonlyMode.checkInitialState()},checkInitialState:function(){var authData=window.adeptusAuthData;(!authData||!authData.user_authorized||!authData.has_api_key||authData.auth_errors&&authData.auth_errors>0)&&this.enable()},enable:function(){$("body").addClass("adeptus-readonly-mode"),this.disableInteractiveElements(),this.showReadOnlyNotification(),this.disableForms(),this.disableButtons(),$(document).trigger("adeptus:readOnlyEnabled")},disable:function(){$("body").removeClass("adeptus-readonly-mode"),this.enableInteractiveElements(),this.hideReadOnlyNotification(),this.enableForms(),this.enableButtons(),$(document).trigger("adeptus:readOnlyDisabled")},disableInteractiveElements:function(){$("input, textarea, select").prop("disabled",!0),$("a:not(.nav-link):not(.breadcrumb-item a)").addClass("disabled").css("pointer-events","none"),$("button:not(.nav-toggle)").prop("disabled",!0),$("form").on("submit.adeptus-readonly",(function(e){return e.preventDefault(),!1}))},enableInteractiveElements:function(){$("input, textarea, select").prop("disabled",!1),$("a.disabled").removeClass("disabled").css("pointer-events",""),$("button").prop("disabled",!1),$("form").off("submit.adeptus-readonly")},disableForms:function(){$("form").each((function(){var $form=$(this);$form.data("adeptus-original-action")||($form.data("adeptus-original-action",$form.attr("action")),$form.attr("action","javascript:void(0)"))}))},enableForms:function(){$("form").each((function(){var $form=$(this),originalAction=$form.data("adeptus-original-action");originalAction&&($form.attr("action",originalAction),$form.removeData("adeptus-original-action"))}))},disableButtons:function(){$("button:not(.nav-toggle)").each((function(){var $btn=$(this);$btn.data("adeptus-original-text")||($btn.data("adeptus-original-text",$btn.text()),$btn.text("Read-Only Mode"),$btn.addClass("btn-secondary").removeClass("btn-primary btn-success btn-danger btn-warning btn-info"))}))},enableButtons:function(){$("button").each((function(){var $btn=$(this),originalText=$btn.data("adeptus-original-text");originalText&&($btn.text(originalText),$btn.removeData("adeptus-original-text"),$btn.removeClass("btn-secondary"))}))},showReadOnlyNotification:function(){Notification?this.readOnlyNotification=Notification.addNotification({message:"Plugin is in read-only mode due to authentication issues",type:"warning",closebutton:!1}):this.readOnlyAlertShown||(alert("Plugin is in read-only mode due to authentication issues"),this.readOnlyAlertShown=!0)},hideReadOnlyNotification:function(){this.readOnlyNotification&&Notification&&(Notification.closeNotification(this.readOnlyNotification),this.readOnlyNotification=null),this.readOnlyAlertShown=!1},isEnabled:function(){return $("body").hasClass("adeptus-readonly-mode")}};return ReadonlyMode}));

//# sourceMappingURL=readonly-mode.min.js.map