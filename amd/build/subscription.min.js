define("report_adeptus_insights/subscription",["jquery","core/ajax","core/notification"],(function($,Ajax,Notification){var Swal=window.Swal,Subscription={planId:0,subscriptionData:{},init:function(){this.initEventHandlers(),this.checkForCheckoutSuccess(),this.updateSubscriptionDisplay()},checkForCheckoutSuccess:function(){var urlParams=new URLSearchParams(window.location.search),checkoutStatus=urlParams.get("checkout"),sessionId=urlParams.get("session_id");if("success"===checkoutStatus&&sessionId){Swal.fire({title:"Verifying Payment...",html:"<p>Please wait while we confirm your subscription upgrade.</p>",allowOutsideClick:!1,showConfirmButton:!1,didOpen:function(){Swal.showLoading()}}),Ajax.call([{methodname:"report_adeptus_insights_verify_checkout_session",args:{session_id:sessionId,sesskey:M.cfg.sesskey},done:function(response){response&&response.success?Swal.fire({icon:"success",title:"Upgrade Successful!",html:"<p>Your subscription has been upgraded to <strong>"+(response.plan_name||"Pro")+"</strong>.</p><p>Your new features are now available.</p>",confirmButtonColor:"#2563eb",confirmButtonText:"Continue"}).then((function(){var cleanUrl=window.location.href.split("?")[0];window.location.href=cleanUrl})):Swal.fire({icon:"warning",title:"Verification Issue",html:"<p>"+(response.message||"Could not verify payment.")+"</p><p>If you completed payment, your subscription will be updated shortly.</p>",confirmButtonColor:"#2563eb"})},fail:function(error){Swal.fire({icon:"info",title:"Processing Payment",html:"<p>Your payment is being processed.</p><p>Your subscription will be updated within a few minutes.</p>",confirmButtonColor:"#2563eb"})}}]);var cleanUrl=window.location.href.split("?")[0];window.history.replaceState({},document.title,cleanUrl)}else if("cancelled"===checkoutStatus){Swal.fire({icon:"info",title:"Checkout Cancelled",text:"Your checkout was cancelled. No charges were made.",confirmButtonColor:"#2563eb"});var cancelUrl=window.location.href.split("?")[0];window.history.replaceState({},document.title,cancelUrl)}},initEventHandlers:function(){$(document).on("click",".btn-upgrade-plan, #upgrade-plan",(function(e){e.preventDefault(),Subscription.handleUpgradeFromFree()})),$(document).on("click",".btn-downgrade-plan",(function(e){e.preventDefault(),Subscription.handleDowngradePlan($(this))})),$(document).on("click",".btn-cancel-subscription, #cancel-subscription",(function(e){e.preventDefault(),Subscription.handleCancelSubscription($(this))})),$(document).on("click",".btn-billing-portal",(function(e){e.preventDefault(),Subscription.openBillingPortal()})),$(document).on("click",".btn-modify-subscription, #modify-subscription",(function(e){e.preventDefault(),Subscription.openBillingPortal()})),$(document).on("click",".btn-view-plans, #view-plans",(function(e){e.preventDefault(),Subscription.openBillingPortal()})),$(document).on("click",".select-plan-btn",(function(e){e.preventDefault();var planId=$(this).data("plan-id"),planName=$(this).data("plan-name");Subscription.handleSelectPlan($(this),planId,planName)})),$(document).on("click","#renew-subscription",(function(e){e.preventDefault(),Subscription.handleRenewSubscription()})),$(document).on("click","#update-payment",(function(e){e.preventDefault(),Subscription.openBillingPortal()}))},handleUpgradePlan:function($button){var planId=$button.data("plan-id"),planName=$button.data("plan-name");planId?Swal.fire({icon:"question",title:"Upgrade to "+planName+"?",html:"<p>You will be redirected to the billing portal to complete the upgrade.</p>",showCancelButton:!0,confirmButtonColor:"#f39c12",cancelButtonColor:"#95a5a6",confirmButtonText:'<i class="fa fa-arrow-up"></i> Upgrade',cancelButtonText:"Cancel"}).then((function(result){result.isConfirmed&&Subscription.createBillingPortalSession(planId,"upgrade")})):Swal.fire({icon:"error",title:"Error",text:"Plan ID not available. Please try again.",confirmButtonColor:"#3085d6"})},handleDowngradePlan:function($button){var planId=$button.data("plan-id"),planName=$button.data("plan-name");planId?Swal.fire({icon:"warning",title:"Downgrade to "+planName+"?",html:'<p>You will be redirected to the billing portal to complete the downgrade.</p><p class="text-muted"><small>Your current plan features will remain active until the end of the billing period.</small></p>',showCancelButton:!0,confirmButtonColor:"#17a2b8",cancelButtonColor:"#95a5a6",confirmButtonText:'<i class="fa fa-arrow-down"></i> Downgrade',cancelButtonText:"Cancel"}).then((function(result){result.isConfirmed&&Subscription.createBillingPortalSession(planId,"downgrade")})):Swal.fire({icon:"error",title:"Error",text:"Plan ID not available. Please try again.",confirmButtonColor:"#3085d6"})},handleCancelSubscription:function($button){Swal.fire({icon:"warning",title:"Cancel Subscription?",html:'<p><strong>Are you sure you want to cancel your subscription?</strong></p><p>You will lose access to premium features at the end of your billing period.</p><p class="text-danger"><small>This action cannot be undone.</small></p>',showCancelButton:!0,confirmButtonColor:"#e74c3c",cancelButtonColor:"#95a5a6",confirmButtonText:'<i class="fa fa-times"></i> Yes, Cancel Subscription',cancelButtonText:"Keep Subscription",focusCancel:!0}).then((function(result){result.isConfirmed&&Subscription.createBillingPortalSession(null,"cancel")}))},openBillingPortal:function(){Subscription.createBillingPortalSession(Subscription.subscriptionData.plan_id,"modify")},createBillingPortalSession:function(planId,action){var data={return_url:window.location.href,sesskey:M.cfg.sesskey};planId&&"undefined"!==planId&&null!==planId&&(data.plan_id=planId),action&&"undefined"!==action&&null!==action&&(data.action=action),Ajax.call([{methodname:"report_adeptus_insights_create_billing_portal_session",args:data,done:function(response){response&&response.success&&response.portal_url?(Swal.fire({icon:"success",title:"Redirecting...",html:"<p>Opening billing portal in a new window...</p>",timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1,didOpen:function(){Swal.showLoading()}}),setTimeout((function(){var newWindow=window.open(response.portal_url,"_blank");newWindow&&!newWindow.closed&&void 0!==newWindow.closed||Swal.fire({icon:"warning",title:"Popup Blocked",html:'<p>Please allow popups for this site and try again.</p><p><a href="'+response.portal_url+'" target="_blank" class="btn btn-primary">Open Portal Manually</a></p>',showConfirmButton:!0,confirmButtonText:"OK"})}),1e3)):Swal.fire({icon:"error",title:"Portal Creation Failed",text:response&&response.message||"Failed to create billing portal session. Please try again.",confirmButtonColor:"#3085d6"})},fail:function(error){Swal.fire({icon:"error",title:"Connection Error",text:"Failed to create billing portal session. Please check your connection and try again.",confirmButtonColor:"#3085d6"})}}])},updateSubscriptionDisplay:function(){Ajax.call([{methodname:"report_adeptus_insights_get_subscription_details",args:{},done:function(response){response.success&&response.data&&(Subscription.subscriptionData=response.data,Subscription.renderSubscriptionInfo(response.data))},fail:function(error){}}])},renderSubscriptionInfo:function(subscriptionData){var $container=$(".subscription-info");if($container.length){var html='<div class="current-subscription">';html+="<h3>Current Subscription</h3>",html+='<div class="subscription-details">',html+="<p><strong>Plan:</strong> "+(subscriptionData.plan_name||"Unknown")+"</p>";var statusClass="text-success",statusText=subscriptionData.status||"Unknown";if(subscriptionData.should_disable_api_access?statusClass="text-danger":(subscriptionData.is_cancelled||subscriptionData.has_payment_issues)&&(statusClass="text-warning"),html+='<p><strong>Status:</strong> <span class="'+statusClass+'">'+statusText+"</span></p>",subscriptionData.status_message){var messageClass="text-muted";subscriptionData.should_disable_api_access?messageClass="text-danger":(subscriptionData.is_cancelled||subscriptionData.has_payment_issues)&&(messageClass="text-warning"),html+='<p class="'+messageClass+'"><small>'+subscriptionData.status_message+"</small></p>"}if(subscriptionData.cancel_at_period_end)html+='<p class="text-warning"><strong>⚠️ Cancelled:</strong> Access ends on '+new Date(1e3*subscriptionData.current_period_end).toLocaleDateString()+"</p>";if(subscriptionData.failed_payment_attempts>0&&(html+='<p class="text-danger"><strong>❌ Payment Failed:</strong> '+subscriptionData.failed_payment_attempts+" failed attempts</p>"),subscriptionData.current_period_end)html+="<p><strong>Next billing:</strong> "+new Date(1e3*subscriptionData.current_period_end).toLocaleDateString()+"</p>";html+="</div>",html+="</div>",$container.html(html),Subscription.updateApiAccessStatus(subscriptionData)}},updateApiAccessStatus:function(subscriptionData){var apiAccessDisabled=subscriptionData.should_disable_api_access||!1;"undefined"!=typeof window&&(window.adeptusApiAccessDisabled=apiAccessDisabled,window.adeptusSubscriptionStatus=subscriptionData),apiAccessDisabled?($(".btn-send-message, .btn-generate-report, .btn-ai-assistant").prop("disabled",!0).attr("title","API access disabled: "+(subscriptionData.status_message||"Subscription issue")),this.showApiAccessWarning(subscriptionData)):($(".btn-send-message, .btn-generate-report, .btn-ai-assistant").prop("disabled",!1).removeAttr("title"),this.hideApiAccessWarning())},showApiAccessWarning:function(subscriptionData){if(!$(".api-access-warning").length){var warningHtml='<div class="api-access-warning alert alert-danger alert-dismissible fade show" role="alert">';warningHtml+="<strong>⚠️ API Access Disabled</strong><br>",warningHtml+=subscriptionData.status_message||"Your subscription has an issue that prevents API access.",subscriptionData.has_payment_issues?warningHtml+="<br><small>Please update your payment method to restore access.</small>":subscriptionData.is_cancelled&&(warningHtml+="<br><small>Your subscription has been cancelled. Please reactivate to restore access.</small>"),warningHtml+='<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',warningHtml+="</div>",$("body").prepend(warningHtml)}},hideApiAccessWarning:function(){$(".api-access-warning").remove()},refresh:function(){this.updateSubscriptionDisplay()},plansData:null,currentInterval:"monthly",handleUpgradeFromFree:function(){Swal.fire({title:"Loading Plans...",html:'<div style="padding: 20px;"><i class="fa fa-spinner fa-spin fa-2x"></i></div>',showConfirmButton:!1,allowOutsideClick:!1}),fetch(M.cfg.wwwroot+"/report/adeptus_insights/ajax/get_available_plans.php?sesskey="+M.cfg.sesskey).then((function(response){return response.json()})).then((function(data){data.success&&(data.monthly_plans.length>0||data.yearly_plans.length>0)?(Subscription.plansData={monthly:data.monthly_plans||[],yearly:data.yearly_plans||[]},Subscription.currentInterval="monthly",Subscription.showPlansModal(data)):Swal.fire({icon:"error",title:"Error",text:data.message||"Failed to load plans. Please try again.",confirmButtonColor:"#3085d6"})})).catch((function(error){Swal.fire({icon:"error",title:"Connection Error",text:"Failed to load plans. Please check your connection and try again.",confirmButtonColor:"#3085d6"})}))},showPlansModal:function(data){var hasYearlyPlans=data.has_yearly_plans||!1,maxYearlySavings=data.max_yearly_savings||0,modalHtml='<div class="plans-modal-container" style="text-align: left;">';hasYearlyPlans&&(modalHtml+='<div class="billing-toggle-container" style="display: flex; justify-content: center; margin-bottom: 24px;">',modalHtml+='<div class="billing-toggle" style="display: inline-flex; align-items: center; background: #f3f4f6; border-radius: 50px; padding: 6px; gap: 4px;">',modalHtml+='<button type="button" class="billing-toggle-btn active" data-interval="monthly" style="padding: 10px 24px; border: none; background: white; border-radius: 50px; font-weight: 600; font-size: 14px; cursor: pointer; color: #1f2937; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease;">Monthly</button>',modalHtml+='<button type="button" class="billing-toggle-btn" data-interval="yearly" style="padding: 10px 24px; border: none; background: transparent; border-radius: 50px; font-weight: 600; font-size: 14px; cursor: pointer; color: #6b7280; transition: all 0.3s ease;">Annual',maxYearlySavings>0&&(modalHtml+='<span style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; font-size: 10px; font-weight: 700; padding: 2px 8px; border-radius: 20px; margin-left: 6px; text-transform: uppercase;">Save '+maxYearlySavings+"%</span>"),modalHtml+="</button>",modalHtml+="</div></div>"),modalHtml+='<div id="plans-grid-container">',modalHtml+=Subscription.buildPlansGrid(data.monthly_plans||[],"monthly"),modalHtml+="</div>",modalHtml+="</div>",Swal.fire({title:'<i class="fa fa-rocket" style="color: #2563eb;"></i> Choose Your Plan',html:modalHtml,width:"95%",showCancelButton:!0,showConfirmButton:!1,cancelButtonText:"Cancel",cancelButtonColor:"#95a5a6",customClass:{popup:"plans-modal-popup"},didOpen:function(){Subscription.initPlansModalHandlers()}})},buildPlansGrid:function(plans,interval){if(!plans||0===plans.length)return'<div style="text-align: center; padding: 40px; color: #6b7280;"><i class="fa fa-calendar-times-o fa-2x" style="margin-bottom: 10px;"></i><p>Annual plans coming soon!</p></div>';var html='<div class="plans-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; max-width: 1000px; margin: 0 auto;">';return plans.forEach((function(plan){var borderColor=plan.is_current?"#10b981":plan.is_popular?"#2563eb":"#e5e7eb",bgColor=plan.is_current?"linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%)":"white";(html+='<div class="plan-card" style="background: '+bgColor+"; border: 2px solid "+borderColor+'; border-radius: 16px; padding: 28px 24px; position: relative; transition: all 0.3s ease; display: flex; flex-direction: column;">',plan.is_current?html+='<div style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; font-size: 11px; font-weight: 700; padding: 5px 14px; border-radius: 20px; text-transform: uppercase; letter-spacing: 0.5px;">Current Plan</div>':plan.is_popular&&(html+='<div style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); color: white; font-size: 11px; font-weight: 700; padding: 5px 14px; border-radius: 20px; text-transform: uppercase; letter-spacing: 0.5px;">Most Popular</div>'),html+='<div style="text-align: center; margin-bottom: 20px; padding-top: 8px;">',html+='<div style="font-size: 22px; font-weight: 700; color: #1f2937; margin-bottom: 8px;">'+plan.short_name+"</div>",plan.description&&(html+='<div style="color: #6b7280; font-size: 13px; line-height: 1.5;">'+plan.description+"</div>"),html+="</div>",html+='<div style="text-align: center; margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid #e5e7eb;">',plan.is_free)?(html+='<div style="font-size: 42px; font-weight: 800; color: #10b981;">Free</div>',html+='<div style="color: #6b7280; font-size: 13px;">Forever</div>'):(html+='<div style="font-size: 42px; font-weight: 800; color: #1f2937;">'+plan.price_formatted+"</div>",html+='<div style="color: #6b7280; font-size: 13px;">'+("yearly"===interval?"per year":"per month")+"</div>",plan.has_savings&&(html+='<div style="margin-top: 6px;"><span style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; font-size: 11px; font-weight: 700; padding: 3px 10px; border-radius: 20px;">Save '+plan.savings_percent+"%</span></div>"));if(html+="</div>",html+='<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #e5e7eb;">',html+='<div style="text-align: center; padding: 12px; background: #f9fafb; border-radius: 10px;"><div style="font-size: 16px; font-weight: 700; color: #1f2937;">'+plan.tokens_limit+'</div><div style="font-size: 11px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;">AI Tokens</div></div>',html+='<div style="text-align: center; padding: 12px; background: #f9fafb; border-radius: 10px;"><div style="font-size: 16px; font-weight: 700; color: #1f2937;">'+plan.exports_limit+'</div><div style="font-size: 11px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;">Exports/mo</div></div>',html+='<div style="text-align: center; padding: 12px; background: #f9fafb; border-radius: 10px;"><div style="font-size: 16px; font-weight: 700; color: #1f2937;">'+plan.reports_limit+'</div><div style="font-size: 11px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;">Saved Reports</div></div>',html+='<div style="text-align: center; padding: 12px; background: #f9fafb; border-radius: 10px;"><div style="font-size: 16px; font-weight: 700; color: #1f2937;">'+plan.export_formats+'</div><div style="font-size: 11px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;">Formats</div></div>',html+="</div>",plan.features&&plan.features.length>0&&(html+='<div style="flex: 1; margin-bottom: 20px;">',html+='<ul style="list-style: none; padding: 0; margin: 0;">',plan.features.forEach((function(feature){html+='<li style="display: flex; align-items: flex-start; gap: 10px; padding: 8px 0; color: #374151; font-size: 13px; line-height: 1.4;"><i class="fa fa-check" style="color: #10b981; font-size: 12px; margin-top: 3px; flex-shrink: 0;"></i> '+feature+"</li>"})),html+="</ul></div>"),html+='<div style="margin-top: auto;">',plan.is_current)html+='<button class="plan-select-btn" disabled style="display: block; width: 100%; padding: 14px; border: none; border-radius: 10px; background: #e5e7eb; color: #6b7280; font-weight: 600; font-size: 14px; cursor: default;"><i class="fa fa-check-circle"></i> Current Plan</button>';else if(plan.is_free)html+='<button class="plan-select-btn" disabled style="display: block; width: 100%; padding: 14px; border: 2px solid #e5e7eb; border-radius: 10px; background: white; color: #374151; font-weight: 600; font-size: 14px; cursor: default;">Free Plan</button>';else{var stripePriceId=plan.stripe_price_id||"",stripeConfigured=plan.stripe_configured||!1;html+='<button class="plan-select-btn" data-plan-id="'+(plan.id||"")+'" data-plan-name="'+plan.short_name+'" data-stripe-price-id="'+stripePriceId+'" data-stripe-configured="'+stripeConfigured+'" style="display: block; width: 100%; padding: 14px; border: none; border-radius: 10px; background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); color: white; font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.3s ease;"><i class="fa fa-arrow-up"></i> Upgrade to '+plan.short_name+"</button>"}html+="</div>",html+="</div>"})),html+="</div>"},initPlansModalHandlers:function(){document.querySelectorAll(".billing-toggle-btn").forEach((function(btn){btn.addEventListener("click",(function(){var interval=this.getAttribute("data-interval");if(interval!==Subscription.currentInterval){document.querySelectorAll(".billing-toggle-btn").forEach((function(b){b.classList.remove("active"),b.style.background="transparent",b.style.color="#6b7280",b.style.boxShadow="none"})),this.classList.add("active"),this.style.background="white",this.style.color="#1f2937",this.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",Subscription.currentInterval=interval;var plans=Subscription.plansData[interval]||[],container=document.getElementById("plans-grid-container");container&&(container.innerHTML=Subscription.buildPlansGrid(plans,interval),Subscription.initPlanButtonHandlers())}}))})),Subscription.initPlanButtonHandlers()},initPlanButtonHandlers:function(){document.querySelectorAll(".plan-select-btn:not([disabled])").forEach((function(btn){btn.addEventListener("click",(function(){var planName=this.getAttribute("data-plan-name"),planId=this.getAttribute("data-plan-id"),stripePriceId=this.getAttribute("data-stripe-price-id");"true"===this.getAttribute("data-stripe-configured")&&stripePriceId?Subscription.createCheckoutSession(planId,stripePriceId,planName):Subscription.openBillingPortalForUpgrade(planName,planId)})),btn.addEventListener("mouseenter",(function(){this.style.transform="translateY(-2px)",this.style.boxShadow="0 8px 20px rgba(37, 99, 235, 0.3)"})),btn.addEventListener("mouseleave",(function(){this.style.transform="translateY(0)",this.style.boxShadow="none"}))}))},openBillingPortalForUpgrade:function(planName,planId){Swal.fire({title:"Opening Billing Portal...",html:"<p>Preparing upgrade to "+planName+"...</p>",allowOutsideClick:!1,showConfirmButton:!1,didOpen:function(){Swal.showLoading()}});var args={return_url:window.location.href,sesskey:M.cfg.sesskey};planId&&(args.plan_id=planId),Ajax.call([{methodname:"report_adeptus_insights_create_billing_portal_session",args:args,done:function(response){if(response&&response.success&&response.portal_url)Swal.fire({icon:"success",title:"Redirecting...",html:"<p>Opening billing portal...</p>",timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1}),setTimeout((function(){window.location.href=response.portal_url}),1e3);else{var errorMessage=response&&response.message||"Failed to open billing portal.";-1!==errorMessage.indexOf("NO_STRIPE_CUSTOMER")||-1!==errorMessage.indexOf("payment_enabled")||-1!==errorMessage.indexOf("Stripe")?Swal.fire({icon:"info",title:"Upgrade Coming Soon",html:"<p>Online payments are not yet configured for this installation.</p><p>To upgrade to <strong>"+planName+'</strong>, please contact your administrator or email:</p><p><a href="mailto:support@adeptus360.com?subject=Upgrade%20to%20'+planName+'">support@adeptus360.com</a></p>',confirmButtonColor:"#2563eb",confirmButtonText:"OK"}):Swal.fire({icon:"error",title:"Billing Portal Error",text:errorMessage,confirmButtonColor:"#3085d6"})}},fail:function(error){Swal.fire({icon:"error",title:"Connection Error",text:"Failed to open billing portal. Please try again.",confirmButtonColor:"#3085d6"})}}])},createCheckoutSession:function(planId,stripePriceId,planName){Swal.fire({title:"Preparing Checkout...",html:"<p>Setting up payment for "+planName+"...</p>",allowOutsideClick:!1,showConfirmButton:!1,didOpen:function(){Swal.showLoading()}});var returnUrl=window.location.href,args={plan_id:parseInt(planId),stripe_price_id:stripePriceId,return_url:returnUrl,sesskey:M.cfg.sesskey};Ajax.call([{methodname:"report_adeptus_insights_create_checkout_session",args:args,done:function(response){if(response&&response.success&&response.checkout_url)Swal.fire({icon:"success",title:"Redirecting to Checkout...",html:"<p>You will be redirected to complete your payment.</p>",timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1}),setTimeout((function(){window.location.href=response.checkout_url}),1e3);else{var errorMessage=response&&response.message||"Failed to create checkout session.";"STRIPE_NOT_CONFIGURED"===(response&&response.error_code||"")?Swal.fire({icon:"info",title:"Payment Not Available",html:"<p>Stripe is not yet configured for the <strong>"+planName+'</strong> plan.</p><p>Please contact your administrator or email:</p><p><a href="mailto:support@adeptus360.com?subject=Upgrade%20to%20'+planName+'">support@adeptus360.com</a></p>',confirmButtonColor:"#2563eb",confirmButtonText:"OK"}):Swal.fire({icon:"error",title:"Checkout Error",text:errorMessage,confirmButtonColor:"#3085d6"})}},fail:function(error){Swal.fire({icon:"error",title:"Connection Error",text:"Failed to create checkout session. Please try again.",confirmButtonColor:"#3085d6"})}}])},handleSelectPlan:function($button,planId,planName){planId?Swal.fire({icon:"info",title:"Subscribe to "+planName+"?",html:"<p>You will be redirected to complete your subscription.</p>",showCancelButton:!0,confirmButtonColor:"#3498db",cancelButtonColor:"#95a5a6",confirmButtonText:'<i class="fa fa-credit-card"></i> Subscribe Now',cancelButtonText:"Cancel"}).then((function(result){result.isConfirmed&&Subscription.createBillingPortalSession(planId,"subscribe")})):Swal.fire({icon:"error",title:"Error",text:"Plan ID not available. Please try again.",confirmButtonColor:"#3085d6"})},handleRenewSubscription:function(){Swal.fire({icon:"success",title:"Renew Your Subscription?",html:"<p>Welcome back! Renew your subscription to regain access to all premium features.</p>",showCancelButton:!0,confirmButtonColor:"#27ae60",cancelButtonColor:"#95a5a6",confirmButtonText:'<i class="fa fa-refresh"></i> Renew Subscription',cancelButtonText:"Not Now"}).then((function(result){result.isConfirmed&&Subscription.createBillingPortalSession(null,"renew")}))}};return Subscription}));

//# sourceMappingURL=subscription.min.js.map